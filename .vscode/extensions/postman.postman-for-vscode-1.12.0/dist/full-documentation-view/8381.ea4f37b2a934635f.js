"use strict";(self.webpackChunkfull_documentation_view=self.webpackChunkfull_documentation_view||[]).push([[8381],{748381:(e,n,l)=>{l.r(n),l.d(n,{FileUploader:()=>we,KeyValueEditor:()=>Fn});var t=l(607560),i=l(540540),o=l.n(i),a=l(159530),r=l.n(a),s=l(778476),d=l(250297),c=l(998283),u=l(461096),p=l(769356),h=l.n(p),b=l(422833),g=l.n(b),v=l(265848),m=l(552322);const f=r().div.withConfig({displayName:"key-value-row-actions__KeyValueRowActionsContainer",componentId:"sc-giwhs-0"})(["position:relative;display:flex;width:40px;justify-content:flex-end;align-items:center;padding-right:4px;border-left:var(--border-width-default) var(--border-style-solid) var(--border-color-default);border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";"],(e=>e.disabled?"var(--background-color-secondary);":"inherit")),y=r()(v.Z).withConfig({displayName:"key-value-row-actions__StyledCheckbox",componentId:"sc-giwhs-1"})(["> span > div{height:16px;width:16px;background-color:",";}&.disabled{opacity:0.4;}"],(e=>e.isChecked?"dark"===e.theme.name?"#ffffff":"#262626":"inherit"));function x(e){return(0,m.jsx)(f,{disabled:e.disabled,children:e.shouldShowCheckbox&&(0,m.jsx)(y,{className:g()({disabled:e.isCheckboxDisabled}),isChecked:e.isRowEnabled,onChange:e.onToggleEnabledState,isDisabled:e.isCheckboxDisabled})})}const C=["content"],w=r().div.withConfig({displayName:"key-value-column__KeyValueColumnContainer",componentId:"sc-shzowe-0"})(["display:flex;flex:",";overflow-y:visible;min-width:0;margin:var(--spacing-zero);position:relative;height:32px;box-sizing:border-box;border-right:",";background-color:",";.key-value-cell{color:",";}"],(e=>e.isLastColumn?`0 1 ${e.columnWidth}%`:`0 0 ${e.columnWidth}%`),(({isLastColumn:e})=>e?"unset":"var(--border-width-default) var(--border-style-solid)\n    var(--border-color-default)"),(e=>e.isNonEditable?"var(--background-color-secondary)":"inherit"),(e=>e.isNonEditable?"var(--content-color-secondary)":"inherit"));function k(e){let{content:n}=e,l=(0,c.Z)(e,C);return(0,m.jsx)(w,(0,t.Z)({},l,{children:n}))}const V=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function j(e,n){if(typeof e!=typeof n)return!1;const l=typeof e;return["string","number","boolean","undefined"].includes(typeof e)?e===n:Array.isArray(e)&&Array.isArray(n)?e.length===n.length&&e.every(((e,l)=>j(e,n[l]))):"object"===l&&(null===e&&null===n||null!==e&&null!==n&&!Array.isArray(e)&&!Array.isArray(n)&&Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every((l=>j(e[l],n[l]))))}var S=l(700207),E=o().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{d:"M4 1V0H8V1H11V2H1V1H4Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M3 10.5V3H2V10.5C2 11.3284 2.67157 12 3.5 12H8.5C9.32843 12 10 11.3284 10 10.5V3H9V10.5C9 10.7761 8.77614 11 8.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M4.25 10V3H5.25V10H4.25Z",fill:"#6B6B6B"}),o().createElement("path",{d:"M6.75 3V10H7.75V3H6.75Z",fill:"#6B6B6B"})),T=o().forwardRef((function(e,n){return o().createElement(S.Z,(0,t.Z)({},e,{svg:E,ref:n}))}));T.getName=function(){return"icon-action-delete-stroke-small"};const R=T,_=r().div.withConfig({displayName:"delete-row__IconContainer",componentId:"sc-1t4lde4-0"})(["align-items:center;height:24px;display:inline-flex;padding:0 var(--spacing-s);border-radius:var(--border-radius-default);&:hover{background-color:var(--highlight-background-color-primary);cursor:pointer;}"]);function D({onClick:e}){return(0,m.jsx)(_,{className:"delete-button",onClick:e,role:"button","aria-label":"delete-row",children:(0,m.jsx)(R,{})})}function Z(e,n,l){let t,i,o,a,r,s,d=0,c=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(n=+n||0,l&&function(e){const n=typeof e;return null!=e&&("object"===n||"function"===n)}(l)){if(c=!(null==l||!l.leading),u="maxWait"in l,u){const e=(null==l?void 0:l.maxWait)||0;o=Math.max(+e,n)}p="trailing"in l?!(null==l||!l.trailing):p}function h(n){const l=t,o=i;return t=i=void 0,d=n,a=e.apply(o,l),a}function b(e,n){return setTimeout(e,n)}function g(e){const l=e-s;return void 0===s||l>=n||l<0||u&&e-d>=o}function v(){const e=Date.now();if(g(e))return m(e);r=b(v,function(e){const l=e-d,t=n-(e-s);return u?Math.min(t,o-l):t}(e))}function m(e){return r=void 0,p&&t?h(e):(t=i=void 0,a)}function f(...e){const l=Date.now(),o=g(l);if(t=e,i=this,s=l,o){if(void 0===r)return function(e){return d=e,r=b(v,n),c?h(e):a}(s);if(u)return r=b(v,n),h(s)}return void 0===r&&(r=b(v,n)),a}return f.cancel=function(){void 0!==r&&clearTimeout(r),d=0,t=s=i=r=void 0},f.flush=function(){return void 0===r?a:m(Date.now())},f.pending=function(){return void 0!==r},f}const M=["indicators","isDuplicated"],N=r().textarea.withConfig({displayName:"editable-cell__StyledTextArea",componentId:"sc-1v6ab2g-0"})(["width:100%;color:var(--content-color-primary);font-size:inherit;font-family:inherit;outline:transparent;resize:none;font-weight:inherit;background:var(--background-color-primary);margin:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-zero) var(--spacing-xs) var(--spacing-xs);border:var(--border-width-default) var(--border-style-solid) var(--border-color-default);z-index:1;",""],(({isDuplicated:e})=>e&&"padding-right: var(--spacing-l)")),A=r().div.withConfig({displayName:"editable-cell__StyledWrapper",componentId:"sc-1v6ab2g-1"})(["display:flex;align-items:flex-start;max-height:var(--size-m);height:100%;width:100%;"]),W=Z(((e,n,l)=>{var t,i;const o=null!=(t=(null==e?void 0:e.scrollHeight)/(null==e||null==(i=e.parentNode)?void 0:i.clientHeight))?t:0;o!==n&&l(Math.ceil(o))}),100);function F(e){let{indicators:n,isDuplicated:l}=e,t=(0,c.Z)(e,M);const o=(0,i.useRef)(null),[a,r]=(0,i.useState)(1);return(0,i.useEffect)((()=>(setTimeout((()=>{if(o.current){const e=o.current.value.length;o.current.selectionStart=e,o.current.selectionEnd=e,o.current.scrollTop=o.current.scrollHeight}})),W(o.current,a,r),()=>{W.cancel()})),[a]),(0,m.jsxs)(A,{children:[(0,m.jsx)(N,{isDuplicated:l,role:"cell","aria-label":`${t.type} input`,ref:o,value:t.value,rows:a,onChange:e=>{t.onChange(e.target.value),W(o.current,a,r)},autoFocus:t.shouldFocusOnMount,placeholder:t.placeholder||"",readOnly:t.readOnly,onBlur:t.onBlur,onKeyDown:e=>{t.preventEnter&&13===e.keyCode&&e.preventDefault()}}),n]})}function P(e){return"string"==typeof e?e:e?e&&e.toString?String(e):Object.prototype.toString.call(e):""}function I(e,n={}){return e?("string"!=typeof e&&(e=P(e)),e.split("\n").map(((e,l)=>(0,m.jsx)("span",{children:B(e,n)},l)))):e}function z(e,n={}){return e?("string"!=typeof e&&(e=P(e)),B(e.split("\n")[0],n)):e}function B(e,n={}){const l=n.maxLength||100;return e?("string"!=typeof e&&(e=P(e)),e.length<=l?e:e.slice(0,l+1)):""}const O=r().div.withConfig({displayName:"key-value-cell__KeyValueCellContainer",componentId:"sc-1i3qzo1-0"})(["width:100%;padding:var(--spacing-zero) var(--spacing-xs) var(--spacing-zero) 9px;align-items:center;cursor:text;font-size:var(--text-size-m);user-select:none;display:flex;height:100%;box-sizing:border-box;justify-content:space-between;color:var(--content-color-primary);",""],(({isDuplicated:e})=>e&&"padding-right: var(--spacing-xl)")),H=r().div.withConfig({displayName:"key-value-cell__KeyValueCellTextContainer",componentId:"sc-1i3qzo1-1"})(["white-space:pre;overflow:hidden;text-overflow:ellipsis;&:empty:not(:focus)::before{content:attr(data-placeholder);color:var(--content-color-tertiary);}"]);function L(e){const n=(0,i.useRef)(null),{value:l,placeholder:t,onBlur:o,preventEnter:a,onFocus:r,type:s,currentWidth:d,actions:c,indicators:u,isDuplicated:p}=e,h=!a,b=(0,i.useCallback)((()=>{null==r||r()}),[r]),g=!l&&t,v=g?`${s} empty cell`:`${s} cell`;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(O,{onBlur:o,onClick:b,ref:n,tabIndex:"0",onFocus:b,isDuplicated:p,children:(0,m.jsx)(H,{role:"cell","aria-label":v,"data-placeholder":g?t:null,children:h?z(l,{maxLength:Math.ceil(2*d)}):I(l,{maxLength:Math.ceil(2*d)})})}),u,c]})}O.displayName="KeyValueCellContainer";const K=[{value:"text",label:"Text"},{value:"file",label:"File"}],$="secret",U="default",q=r().div.withConfig({displayName:"masked-cell__MaskedInputContainer",componentId:"sc-1fwx2vm-0"})(["padding-inline-start:var(--spacing-xs);display:flex;flex:1;input{border:var(--border-width-default) var(--border-style-solid) transparent;color:var(--content-color-primary);width:100%;font-size:var(--text-size-m);line-height:var(--line-height-m);font-family:var(--text-family-default);height:var(--controls-size-default);box-sizing:border-box;background-color:transparent;padding:var(--spacing-zero);overflow:hidden;text-overflow:ellipsis;display:block;padding-left:var(--spacing-xs);&:hover,&:focus,&:active{outline:none;}",";}"],(({isFocused:e})=>e&&"\n        border: var(--border-width-default) var(--border-style-solid) var(--border-color-default);\n        background: var(--background-color-primary);\n        height: var(--size-s);\n        padding-left: var(--spacing-xs);\n        margin-top: var(--spacing-xs);\n        margin-right: var(--spacing-s);\n    "));function X(e){const{value:n,isEditable:l,onBlur:t,onChange:i,onFocus:o,type:a}=e,r=`${a} masked cell`;return(0,m.jsx)(q,{isFocused:Boolean(l),onBlur:t,onClick:o,onFocus:o,children:(0,m.jsx)("input",{role:"cell","aria-label":r,value:n||"",spellCheck:!1,type:"password",onChange:e=>{i(e.currentTarget.value)}},"text")})}var Y=l(816913),G=l(981397),J=l(988131);const Q=["hidden","value","isEditable","currentWidth","readOnly","shouldFocusOnMount","onBlur","onChange","onFocus","actions","editorType","maskState","enableVariableSuggestions","placeholder","isDuplicated"],ee=r()(Y.Z).withConfig({displayName:"key-value-cell-editor__StyledWarningIcon",componentId:"sc-c7rjy0-0"})(["position:absolute;align-self:center;right:var(--spacing-s);z-index:10;"]);function ne(e){const{hidden:n,value:l,isEditable:i,currentWidth:o,readOnly:a,shouldFocusOnMount:r,onBlur:s,onChange:d,onFocus:u,actions:p,editorType:h,maskState:b,enableVariableSuggestions:g,placeholder:v,isDuplicated:f}=e,y=(0,c.Z)(e,Q),x={readOnly:a,shouldFocusOnMount:r,onBlur:s,onChange:d},C=e=>{null==d||d(y.type,e)},w=(0,J.usePostmanInputFeatureFlag)();if(n)return null;if(g&&w){let n=!l&&v?`${y.type} empty cell`:`${y.type} cell`;return i&&(n=`${y.type} input`),(0,m.jsx)(J.KVEditorInput,{value:l||"",onChange:C,suggestions:[],placeholder:"key"===y.type?"Key":"Value",ariaLabel:n,onFocus:u,onBlur:s,shouldFocusOnMount:r,actions:p,indicators:e.indicators,isEditable:!x.readOnly})}return h===$&&b.isMasked?(0,m.jsx)(X,(0,t.Z)({onChange:C,onFocus:u,onBlur:s,isEditable:i,value:l,placeholder:v},y)):(0,m.jsxs)(m.Fragment,{children:[i?(0,m.jsx)(F,(0,t.Z)({},x,{onChange:C,onFocus:u,value:l,placeholder:v,isDuplicated:f},y)):(0,m.jsx)(L,(0,t.Z)({},y,{value:l,onFocus:u,actions:p,onChange:C,placeholder:v,currentWidth:o,isDuplicated:f})),f&&(0,m.jsx)(G.Z,{content:"This variable has been overwritten by a duplicate key.",placement:"bottom",children:(0,m.jsx)(ee,{color:"content-color-warning",className:"duplicate-warning-icon"})})]})}var le=l(474962),te=l(963622),ie=l(484591);const oe=r().div.withConfig({displayName:"key-value-cell-info__InfoIconContainer",componentId:"sc-3nzppj-0"})(["position:absolute;right:var(--spacing-m);display:flex;height:100%;align-items:center;cursor:default;z-index:1;background:transparent !important;"]),ae=({infoTitle:e,info:n})=>(0,m.jsxs)(m.Fragment,{children:[e&&(0,m.jsx)(le.Z,{type:"h3",styleAs:"h4",text:e}),n&&(0,m.jsx)(te.ZP,{type:"small",color:"content-color-primary",children:n})]}),re=e=>{const{info:n,infoTitle:l,placement:i}=e;return n||l?(0,m.jsx)(oe,{children:(0,m.jsx)(G.Z,{content:(0,m.jsx)(ae,(0,t.Z)({},e)),placement:i,children:(0,m.jsx)(ie.Z,{})})}):null},se=r()(u.Z).withConfig({displayName:"key-value-dropdown__StyledSelect",componentId:"sc-1ccix0v-0"})(["margin:var(--spacing-xs);min-width:80px;"]);function de(e){const{hidden:n,options:l,defaultOption:t,onChange:o}=e,[a,r]=(0,i.useState)(t),[s,d]=(0,i.useState)(!1);return!s&&n?null:(0,m.jsx)(se,{viaPortal:!0,className:"single-type-select","aria-label":"KV Type Select",triggerWidth:"auto",triggerSize:"small",triggerType:"tertiary",menuMinWidth:100,menuMaxWidth:165,isSearchable:!1,isClearable:!1,options:l,value:a,onOpen:()=>d(!0),onClose:()=>d(!1),onChange:e=>{r(e),null==o||o(e)}})}var ce=l(458560),ue=l(925637),pe=l(623180);const he=r().button.withConfig({displayName:"CustomChipInputComponents__StyledCloseIconContainer",componentId:"sc-1y84ug7-0"})(["border:",";display:flex;justify-content:center;align-items:center;cursor:pointer;height:",";width:",";border-top-right-radius:",";border-bottom-right-radius:",";background-color:transparent;svg path{fill:",";}&:hover{svg path{fill:",";}}&:is(:focus,:active){svg path{fill:",";}outline:none;}&:disabled{cursor:not-allowed;svg path{fill:",";}}"],(e=>e.theme["spacing-zero"]),(e=>e.theme["size-s"]),(e=>e.theme["size-s"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["content-color-secondary"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["content-color-tertiary"])),be=o().forwardRef(((e,n)=>{let{onClick:l,isDisabled:t,onKeyDown:i}=e;return o().createElement(he,{onKeyDown:i,ref:n,disabled:t,onClick:l},o().createElement(pe.Z,null))}));be.name="CloseIcon";const ge=r().div.withConfig({displayName:"CustomChipInputComponents__StyledChip",componentId:"sc-1y84ug7-1"})(["box-sizing:border-box;display:flex;justify-content:center;align-items:center;height:",";padding:",";color:",";background-color:",";border-radius:",";&:hover{background-color:",";}&:is(:active,:focus-within){background-color:",";}"],(e=>e.theme["size-s"]),(e=>`2px ${e.theme["spacing-zero"]} 2px ${e.theme["spacing-s"]}`),(e=>e.theme["content-color-primary"]),(e=>e.isDisabled?e.theme["highlight-background-color-tertiary"]:e.theme["background-color-tertiary"]),(e=>e.theme["border-radius-default"]),(e=>!e.isDisabled&&e.theme["highlight-background-color-primary"]),(e=>e.theme["highlight-background-color-tertiary"]));function ve(e){const n=(0,i.useRef)(),{label:l,onClick:t,isDisabled:a}=e;return o().createElement(ge,{onClick:()=>{n.current.focus()},isDisabled:a},o().createElement(me,{isDisabled:a},l),o().createElement(be,{onKeyDown:e=>{"Backspace"===e.key&&t()},ref:n,isDisabled:a,onClick:e=>{t(),e.stopPropagation()}}))}function me(e){const{children:n,isDisabled:l}=e;return o().createElement(te.ZP,{type:"body-medium",color:l&&"content-color-secondary"},n)}var fe=l(619578);const ye="Couldn't upload file",xe=r()(ce.Z).withConfig({displayName:"file-uploader__FileUploaderContainer",componentId:"sc-cfed37-0"})(["max-width:100%;"]),Ce=r().div.withConfig({displayName:"file-uploader__StyledChip",componentId:"sc-cfed37-1"})(["width:100%;span{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]);function we(e){return(0,m.jsx)(ue.VW,{children:(0,m.jsx)(fe.Toast.Ui.ToastEventEmitter,{children:(0,m.jsx)(ke,(0,t.Z)({},e))})})}function ke(e){const{value:n,onReset:l,id:t,label:o,name:a,multiple:r,isDisabled:s,loading:d,error:c,accept:u,autoFocus:p,onChange:h}=e;let b;if((0,i.useEffect)((()=>{c&&fe.Toast.getToasts().addToast({status:"error",title:ye,description:c})}),[c]),null!=n&&n.length){const e=n.length,t=n[0],i=n.join(", "),o=e>1?`${e} files selected`:`${t}`;b=(0,m.jsx)(G.Z,{content:i,children:(0,m.jsx)(Ce,{children:(0,m.jsx)(ve,{label:o,onClick:l})})})}else b=(0,m.jsx)(fe.FileUploader,{id:t,onChange:e=>{!s&&e&&(null==h||h(e))},multiple:r,isDisabled:s,accept:u,name:a,actionLabel:o,autoFocus:p,size:"small",loading:d});return(0,m.jsx)(xe,{direction:"column",alignItems:"center",children:b})}const Ve=()=>{const e=(0,i.useRef)(!0);return(0,i.useEffect)((()=>()=>{e.current=!1}),[]),e},je="Select Files",Se=r()(ce.Z).withConfig({displayName:"key-value-file-uploader__StyledContainer",componentId:"sc-12ibx3l-0"})(["padding:var(--spacing-xs);"]);function Ee(e){const{id:n,type:l,value:t,hidden:o,error:a,onFilesSelect:r,onChange:s}=e,[d,c]=(0,i.useState)(!1),u=Ve(),p=(0,i.useMemo)((()=>Array.isArray(t)?t:t?[t]:[]),[t]);return o?null:(0,m.jsx)(Se,{height:"100%",width:"100%",children:(0,m.jsx)(we,{label:je,id:String(n),multiple:!0,error:a,value:p,loading:d,onChange:e=>{r&&(c(!0),r(n,e).finally((()=>{u.current&&c(!1)})))},onReset:()=>null==s?void 0:s(l,"")})})}const Te=e=>e.disableEdit,Re=(e,n)=>n||e.system&&!e.allowedToToggle,_e=(e,n)=>!e.disableEdit&&!(null!=n&&n.disableToggle)||e.system;var De=l(95362),Ze=l(470262);const Me=r().div.withConfig({displayName:"toggle-mask-button__IconContainer",componentId:"sc-1bzaljx-0"})(["padding:var(--spacing-xs) var(--spacing-s);border-radius:var(--border-radius-default);opacity:",";&:hover{cursor:pointer;}"],(({alwaysPresent:e})=>e?"1":"0"));function Ne({onClick:e,maskState:n,isVisible:l}){const t=!1===n.isMasked;return(0,m.jsx)(Me,{role:"button",className:"toggle-mask","aria-label":"toggle-mask-row",onClick:e,alwaysPresent:t||l,children:n.isMasked?(0,m.jsx)(De.Z,{}):(0,m.jsx)(Ze.Z,{})})}var Ae=l(564691),We=l(348263),Fe=l(80605),Pe=l(559824),Ie=l(517282),ze=l(829225);const Be=e=>{const{onPersist:n,onReset:l,disableVariablePersistAction:t,disablePersistActionTooltip:i,disableResetActionTooltip:o,disableVariableResetAction:a}=e,r=(e=!1,n)=>{if(e){let e;switch(n){case"persist":e=i;break;case"reset":e=o}return e||"You do not have permissions to perform this action."}return null};return(0,m.jsxs)(Ae.Z,{children:[(0,m.jsx)(We.Z,{children:(0,m.jsx)(Fe.Z,{icon:(0,m.jsx)(ze.Z,{size:"small"}),type:"tertiary",tooltip:"View more actions",size:"small","data-testid":"more-options-button"})}),(0,m.jsxs)(Pe.Z,{placement:"bottom-end",children:[(0,m.jsx)(Ie.Z,{onClick:n,isDisabled:t,tooltip:r(t,"persist"),children:"Persist"}),(0,m.jsx)(Ie.Z,{onClick:l,isDisabled:a,tooltip:r(a,"reset"),children:"Reset"})]})]})},Oe=r().div.withConfig({displayName:"key-value-row-actions-right__StyledActionsContainer",componentId:"sc-acbvs-0"})(["display:flex;flex-direction:row;opacity:",";margin-right:var(--spacing-xs);"],(({isVisible:e})=>e?"1":"0")),He=({isHidden:e=!1,children:n,isVisible:l})=>e||!n?null:(0,m.jsx)(Oe,{isVisible:l,children:n});var Le=l(226246);const Ke=["warning"],$e=["prevValue","prevCurrentWidth"],Ue=["nextValue","nextCurrentWidth"],qe=r().div.withConfig({displayName:"key-value-form-row__KeyValueFormRowContainer",componentId:"sc-1ypxq1j-0"})(["display:flex;flex-direction:row;position:relative;flex:0;height:32px;border-bottom:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";color:",";"],(e=>e.isRowFocused?"var(--background-color-secondary) !important":e.isRowSelected||e.disabled?"var(--background-color-secondary)":"inherit"),(e=>e.disabled?"var(--content-color-tertiary)":"inherit")),Xe=r().div.withConfig({displayName:"key-value-form-row__KeyValueRowInput",componentId:"sc-1ypxq1j-1"})(["position:relative;display:flex;flex:1;min-width:0;flex-direction:row;color:",";"],(e=>e.isBlocked?"var(--content-color-tertiary)":"inherit")),Ye=r().div.withConfig({displayName:"key-value-form-row__StyledRowActionsContainer",componentId:"sc-1ypxq1j-2"})(["display:flex;align-items:center;cursor:pointer;border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);"]),Ge=r()(u.Z).withConfig({displayName:"key-value-form-row__StyledVariableTypeDropdown",componentId:"sc-1ypxq1j-3"})([".aether-dropdown__control,.aether-dropdown__control--is-focused:hover{border:none;width:100%;box-shadow:none;background-color:unset !important;}"]),Je=new Map;Je.set("default",{value:U,label:"default"}),Je.set("secret",{value:$,label:"secret"});const Qe=[Je.get("default"),Je.get("secret")];function en(e){const{index:n,value:l,onChange:o,onRemove:a,currentWidth:r,showColumns:s,allowedColumns:d,enableFiles:u,onFilesSelect:p,maskState:h,toggleMaskValue:b,hideVariableTypeDropdown:g,onPersist:v,onReset:f,onBlur:y,enableVariableSuggestions:C,optionsDropdownValues:w,isDuplicated:j}=e,S=(0,i.useRef)(o);S.current=o;let{key:E,value:T,sessionValue:R="",options:_,type:Z,enabled:M=!0,description:N="",fileUploadError:A}=l;const W=Z===$?$:U,F=s.includes("variableType")?W:Z||"text",[P,I]=(0,i.useState)(null),[z,B]=(0,i.useState)(null),O=null!==P,H=(0,i.useMemo)((()=>{var e;return null!=(e=K.find((e=>e.value===l.type)))?e:K[0]}),[l.type]),L=(0,i.useCallback)(((e,n)=>{"sessionValue"===e&&void 0!==n&&l.isSessionValueDeleted&&(null==S.current||S.current((0,t.Z)({},l,{[e]:n,isSessionValueDeleted:!1})));const i="type"===e&&["text","file"].includes(n);null==S.current||S.current((0,t.Z)({},l,i&&{value:""},{[e]:n}))}),[l]),q=(0,i.useCallback)((e=>{(0,c.Z)(l,Ke),L("enabled",e)}),[l,L]),X=(0,i.useCallback)((()=>{a&&a()}),[a]),Y=(0,i.useCallback)((n=>e[`nonEditable${V(n)}s`]),[e]);function G(e){return Number(r[null==s?void 0:s.indexOf(e)])}return(0,m.jsxs)(qe,{role:"row","aria-rowindex":n,disabled:Te(l),isRowSelected:e.isRowSelected,isRowFocused:null!==P,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),children:[(0,m.jsx)(x,{disabled:e.disableSorting&&e.nonEditableToggles,shouldShowCheckbox:_e(l,e),isRowEnabled:M,onToggleEnabledState:q,isCheckboxDisabled:Re(l,e.nonEditableToggles)}),(0,m.jsxs)(Xe,{isBlocked:l.disableEdit,children:[(0,m.jsx)(k,{columnWidth:G("key"),isNonEditable:Y("key"),isLastColumn:s&&"key"===s[s.length-1],content:(0,m.jsx)(ne,{type:"key",value:E,currentWidth:G("key"),onFocus:()=>I("key"),onChange:L,isEditable:"key"===P,placeholder:e.keyPlaceholder,preventEnter:e.disableMultilineKey||!1,readOnly:l.disableEdit||e.nonEditableKeys,shouldFocusOnMount:!0,onBlur:()=>I(null),isDuplicated:j,actions:(0,m.jsx)(de,{hidden:!z||!u,options:K,defaultOption:H,onChange:e=>L("type",e.value)}),indicators:(0,m.jsx)(re,{infoTitle:l.infoTitle,info:l.info,placement:"right"}),enableVariableSuggestions:C})}),s.includes("variableType")&&(0,m.jsx)(k,{columnWidth:G("variableType"),isNonEditable:Y("variableType"),isLastColumn:s&&"variableType"===s[s.length-1],content:(!g||e.nonEditableVariableTypes)&&(0,m.jsx)(Ge,{isRowFocused:O,tabIndex:-1,isDisabled:e.nonEditableVariableTypes,onChange:async l=>{const{disableAllVariablesSync:t=!1,disableSecretVariablesSync:i}=e;if(Z===l.value)return;if(t||!i&&l.value===$||i&&l.value===$&&!T)return L("type",l.value),void(b&&b(n));const o=Le.Modals.getModals(),a=await o.showWarningDialog({uid:"kv-editor-variable-type-change-confirmation",subject:`Change ${E}'s type to ${l.value}?`,message:"This will reveal the hidden values in plain text everywhere in the app for all team members",options:[{title:"Cancel",isDefaultOnDismiss:!0},{title:"Change type",isPrimary:!0}]});return a&&"Change type"===a.title?(L("type",l.value),void(b&&b(n))):void 0},options:Qe,value:Je.get(F),isClearable:!1,isSearchable:!1,menuWidth:100,viaPortal:!0})}),s.includes("value")&&(0,m.jsx)(k,{columnWidth:G("value"),isNonEditable:Y("value"),isLastColumn:s&&"value"===s[s.length-1],content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ne,{hidden:"file"===Z,type:"value",value:T,currentWidth:G("value"),onFocus:()=>I("value"),onChange:L,isEditable:"value"===P,placeholder:e.valuePlaceholder,preventEnter:e.disableMultilineValue||!1,readOnly:l.disableEdit||e.nonEditableValues,shouldFocusOnMount:!0,onBlur:()=>("value",I(null),void(y&&y("value",l))),editorType:Z,maskState:h,enableVariableSuggestions:C}),(0,m.jsx)(Ee,{hidden:"file"!==Z,id:n,type:"value",value:T,error:A,onChange:L,onFilesSelect:p})]})}),s.includes("description")&&(0,m.jsx)(k,{columnWidth:G("description"),isNonEditable:Y("description"),isLastColumn:s&&"description"===s[s.length-1],content:(0,m.jsx)(ne,{type:"description",value:N,onChange:L,placeholder:e.descriptionPlaceholder,isEditable:"description"===P,currentWidth:G("description"),onFocus:()=>I("description"),readOnly:l.disableEdit||e.nonEditableDescriptions,shouldFocusOnMount:!0,onBlur:()=>I(null)})}),s.includes("sessionValue")&&(0,m.jsx)(k,{columnWidth:G("sessionValue"),isNonEditable:Y("sessionValue"),isLastColumn:s&&"sessionValue"===s[s.length-1],content:(0,m.jsx)(ne,{type:"sessionValue",value:R,onChange:L,isEditable:"sessionValue"===P,placeholder:l.isSessionValueDeleted?"[Deleted]":e.sessionValuePlaceholder,preventEnter:e.disableMultilineValue||!1,currentWidth:G("sessionValue"),onFocus:()=>I("sessionValue"),readOnly:l.disableEdit||e.nonEditableSessionValue,shouldFocusOnMount:!0,onBlur:()=>I(null),editorType:Z,maskState:h,enableVariableSuggestions:C})}),s.includes("options")&&(0,m.jsx)(k,{columnWidth:G("options"),isNonEditable:Y("options"),isLastColumn:s&&"options"===s[s.length-1],content:(0,m.jsx)(Ge,{isRowFocused:O,tabIndex:-1,onChange:e=>L("options",e),options:w,value:_,isClearable:!1,isSearchable:!1,menuWidth:100})}),(0,m.jsx)(Ye,{children:((null==s?void 0:s.includes("value"))||(null==s?void 0:s.includes("description"))||(null==s?void 0:s.includes("sessionValue")))&&!e.isRowSelected&&!e.value.disableEdit&&(0,m.jsxs)(m.Fragment,{children:[F===$&&(0,m.jsx)(Ne,{isVisible:z,maskState:h,onClick:()=>b(n)}),(0,m.jsxs)(He,{isHidden:O,isVisible:z,children:[!e.disableDelete&&(0,m.jsx)(D,{onClick:X}),!e.disableVariableRowDropdown&&d.includes("sessionValue")&&(0,m.jsx)(Be,{onPersist:v,onReset:f,disableVariablePersistAction:e.disableVariablePersistAction||e.disableSecretVariablesSync&&F===$,disablePersistActionTooltip:e.disablePersistActionTooltip,disableVariableResetAction:e.disableVariableResetAction||e.disableSecretVariablesSync&&F===$,disableResetActionTooltip:e.disableResetActionTooltip})]})]})})]})]})}const nn=(0,i.memo)(en,((e,n)=>{const{prevValue:l,prevCurrentWidth:t}=e,i=(0,c.Z)(e,$e),{nextValue:o,nextCurrentWidth:a}=n,r=(0,c.Z)(n,Ue);return!!h()(l,o)&&(!!h()(i,r)&&!!j(t,a))}));var ln=l(749437),tn=l(680047);const on=["values","disableSorting","onChange","onRemove","disableDelete","disableCreate","disableToggle","keyPlaceholder","valuePlaceholder","descriptionPlaceholder","disableVariableRowDropdown","currentWidth","maskStatesMap","toggleMaskValue","onPersist","onReset","onBlur","filteredIndices","searchValue","enableScroll","duplicateWarningsMap"],an=r().div.withConfig({displayName:"key-value-form-sortable__KeyValueFormSortableContainer",componentId:"sc-17kmkrd-0"})(["display:flex;flex:1;flex-direction:column;",";.key-value-form-editor-sortable__selectable{display:flex;flex-direction:column;}"],(({enableScroll:e})=>e&&"overflow: overlay;"));function rn(e){let{values:n,disableSorting:l,onChange:o,onRemove:a,disableDelete:r,disableCreate:s,disableToggle:d,keyPlaceholder:u,valuePlaceholder:p,descriptionPlaceholder:h,disableVariableRowDropdown:b,currentWidth:g,maskStatesMap:v,toggleMaskValue:f,onPersist:y,onReset:x,onBlur:C,filteredIndices:w,searchValue:k,enableScroll:V,duplicateWarningsMap:j}=e,S=(0,c.Z)(e,on);const E=(0,i.useCallback)(((e,n)=>{o&&o(e,n)}),[o]),T=(0,i.useCallback)((e=>{a&&a(e)}),[a]),R=k&&w?w.map((e=>n[e])):n;return(0,m.jsx)(an,{enableScroll:V,children:k&&0===R.length?(0,m.jsx)("div",{className:"key-value-form-editor-sortable",children:(0,m.jsx)(ln.Z,{title:"No results found",children:(0,m.jsx)(tn.Z,{name:"illustration-search"})})}):R&&R.map(((e,i)=>{var o,a;const c=e.id===(null==n?void 0:n.length)-1;return(0,m.jsx)(nn,(0,t.Z)({index:i,selectableKey:e.id,value:e,onChange:n=>E(e.id,n),onRemove:()=>T(e.id),onPersist:()=>{return n=e.id,void(y&&y(n));var n},onReset:()=>{return n=e.id,void(x&&x(n));var n},onBlur:(n,l)=>((e,n,l)=>{C&&C(e,n,l)})(e.id,n,l),disableSorting:l||c,disableToggle:d||c&&!s,disableDelete:r||c&&!s,disableVariableRowDropdown:b||c&&!s,keyPlaceholder:c&&u,valuePlaceholder:c&&p,descriptionPlaceholder:c&&h,hideVariableTypeDropdown:!s&&c,currentWidth:g,maskState:!(!s&&c)&&(v&&v[e.id]||{isMasked:e.type===$}),isDuplicated:j&&j[e.id].isOverridden,toggleMaskValue:f},S),null!=(o=null==(a=e.id)?void 0:a.toString())?o:i)}))})}var sn=l(970355);function dn(e,n=100){return e/n*100}function cn(e,n=2){return Math.round(e*Math.pow(10,n))/Math.pow(10,n)}const un=500,pn=r().div.withConfig({displayName:"resize-handle__StyledDiv",componentId:"sc-o8gbx1-0"})(["height:32px;width:16px;margin-left:-8px;background-color:transparent;position:absolute;left:","%;cursor:col-resize;z-index:1;"],(e=>e.left)),hn=e=>{const{showColumns:n,currentWidth:l,prevColumn:t,nextColumn:o,parentWidth:a=un,handleResize:r}=e,s=(0,i.useCallback)((e=>{const t=null==n?void 0:n.indexOf(e);if(-1===t)return 0;let i=0;for(let e=0;e<=t;e++)i+=l[e];return cn(i)}),[n,l]),d=(0,i.useMemo)((()=>{const e=s(n[(null==n?void 0:n.indexOf(t))-1])+dn(100,a),l=s(o)-dn(100,a);return{min:cn(e),max:cn(l)}}),[t,o,n,a,s]),c=(0,i.useCallback)((e=>Number.isNaN(d.min)||Number.isNaN(d.max)?e:cn(Math.min(Math.max(e,d.min),d.max))),[d]),u=(0,i.useCallback)(((e,i)=>{const s=c(dn(i.x,a));if(s==d.min||s==d.max)return;const u=[...l],p=l[n.indexOf(t)]+i.deltaX/a*100,h=l[n.indexOf(o)]-i.deltaX/a*100;u[null==n?void 0:n.indexOf(t)]=cn(p,2),u[null==n?void 0:n.indexOf(o)]=cn(h,2),null==r||r(u)}),[a,l,n,d]);return(0,m.jsx)(sn.DraggableCore,{onDrag:u,children:(0,m.jsx)(pn,{left:c(s(t))})})},bn=r().div.withConfig({displayName:"key-value-header__KeyValueFormHeader",componentId:"sc-4dw07d-0"})(["font-size:var(--text-size-m);font-family:var(--font-family-default);"]),gn=r().div.withConfig({displayName:"key-value-header__StyledHeaderActionsContainer",componentId:"sc-4dw07d-1"})(["border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);display:flex;align-items:center;height:32px;padding:0 var(--spacing-xs);"]),vn=r().div.withConfig({displayName:"key-value-header__KeyValueFormHeaderRow",componentId:"sc-4dw07d-2"})(["display:flex;flex-direction:row;height:32px;position:relative;flex:1 1 auto;margin-bottom:var(--spacing-zero);border-bottom:var(--border-width-default) var(--border-style-solid) var(--border-color-default);&:hover,&.is-hovered{background-color:transparent;}&__is-highlighted{background-color:var(--background-color-info);animation:fadeOut 1.2s linear 1;.key-value-form-row__modification-options{background-color:var(--background-color-info);animation:fadeOut 1.2s linear 1;}}"]),mn=r().div.withConfig({displayName:"key-value-header__KeyValueHeaderActions",componentId:"sc-4dw07d-3"})(["position:relative;display:flex;border-top-width:0;width:44px;justify-content:flex-end;border-left:var(--border-width-default) var(--border-style-solid) var(--border-color-default);border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:",";"],(e=>e.nonEditableToggles?"var(--background-color-secondary);":"inherit")),fn=r().div.withConfig({displayName:"key-value-header__FeedbackState",componentId:"sc-4dw07d-4"})(["height:30px;width:0;position:absolute;background-color:var(--border-color-default);"]),yn=r().div.withConfig({displayName:"key-value-header__HeadersGroup",componentId:"sc-4dw07d-5"})(["flex:1;flex-direction:row;position:relative;min-width:0;display:flex;"]),xn=r().div.withConfig({displayName:"key-value-header__HeaderContent",componentId:"sc-4dw07d-6"})(["padding:var(--spacing-s);color:var(--content-color-secondary);font-size:var(--text-size-m);line-height:var(--line-height-m);font-weight:var(--text-weight-medium);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:default;user-select:none;"]),Cn=r().div.withConfig({displayName:"key-value-header__HeaderColumn",componentId:"sc-4dw07d-7"})(["align-items:center;flex:",";overflow:hidden;display:flex;position:relative;box-sizing:border-box;border-right:var(--border-width-default) var(--border-style-solid) var(--border-color-default);margin:var(--spacing-zero);background-color:",";"],(e=>e.isLastColumn?`0 1 ${e.columnWidth}%`:`0 0 ${e.columnWidth}%`),(e=>e.isNonEditable?"var(--background-color-secondary)":"inherit")),wn=new Map;wn.set("persistAll",{disabled:"You do not have permissions to perform this action.",default:"Persisting all values will replace all initial values with the current values of the variables."}),wn.set("resetAll",{default:"Resetting all values will replace all current values with the initial values of the variables."});const kn=(e,n,l)=>{let t;var i,o;return n&&(t=l||(null==(i=wn.get(e))?void 0:i.disabled)),t||(t=null==(o=wn.get(e))?void 0:o.default),t},Vn=({allowedColumns:e,persistAll:n,disableVariablePersistAction:l,disablePersistActionTooltip:t,resetAll:i,disableVariableResetAction:o,disableResetActionTooltip:a})=>e.includes("sessionValue")?(0,m.jsx)(gn,{children:(0,m.jsxs)(Ae.Z,{closeOnSelect:!1,children:[(0,m.jsx)(We.Z,{"data-testid":"key-value-editor-more-actions-button",children:(0,m.jsx)(Fe.Z,{size:"small",icon:(0,m.jsx)(ze.Z,{size:"small"}),type:"tertiary",tooltip:"View more actions","data-testid":"more-options-button-column-header"})}),(0,m.jsxs)(Pe.Z,{children:[(0,m.jsx)(Ie.Z,{onClick:n,isDisabled:l,tooltip:kn("persistAll",l,t),children:"Persist all"}),(0,m.jsx)(Ie.Z,{onClick:i,isDisabled:o,tooltip:kn("resetAll",o,a),children:"Reset all"})]})]})}):null;function jn(e){const{showColumns:n,currentWidth:l,handleWidthChange:t,keyHeading:o,valueHeading:a,descriptionHeading:r,sessionHeading:s,typeHeading:d,optionsHeading:c,allowedColumns:u,persistAll:p,resetAll:h,disableVariablePersistAction:b,disablePersistActionTooltip:g,disableVariableResetAction:v,disableResetActionTooltip:f}=e,y=(0,i.useRef)(null),[x,C]=(0,i.useState)(null);(0,i.useEffect)((()=>{const e=new ResizeObserver((e=>{C(e[0].contentRect.width)})),n=y.current;return e.observe(n),()=>{e.unobserve(n)}}),[]);const w=(0,i.useCallback)((n=>e[`nonEditable${V(n)}s`]),[e]),k=(0,i.useCallback)((e=>Number(l[null==n?void 0:n.indexOf(e)])),[n,l]);return(0,m.jsx)(bn,{role:"rowgroup",children:(0,m.jsxs)(vn,{role:"row",children:[(0,m.jsx)(mn,{children:(0,m.jsx)(fn,{})}),(0,m.jsxs)(yn,{ref:y,children:[(0,m.jsx)(Cn,{type:"key",role:"columnheader",columnWidth:k("key"),isNonEditable:w("key"),isLastColumn:n&&"key"===n[n.length-1],children:(0,m.jsx)(xn,{children:o||"Key"})}),(null==n?void 0:n.includes("variableType"))&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hn,{handleResize:t,showColumns:n,currentWidth:l,prevColumn:"key",nextColumn:"variableType",parentWidth:x}),(0,m.jsx)(Cn,{type:"variableType",role:"columnheader",columnWidth:k("variableType"),isNonEditable:w("variableType"),isLastColumn:n&&"variableType"===n[n.length-1],children:(0,m.jsx)(xn,{children:d||"Type"})})]}),(null==n?void 0:n.includes("value"))&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hn,{handleResize:t,showColumns:n,currentWidth:l,prevColumn:n.includes("variableType")?"variableType":"key",nextColumn:"value",parentWidth:x}),(0,m.jsx)(Cn,{type:"value",role:"columnheader",columnWidth:k("value"),isNonEditable:w("value"),isLastColumn:n&&"value"===n[n.length-1],children:(0,m.jsx)(xn,{children:a||"Value"})})]}),(null==n?void 0:n.includes("description"))&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hn,{handleResize:t,showColumns:n,currentWidth:l,prevColumn:"value",nextColumn:"description",parentWidth:x}),(0,m.jsx)(Cn,{type:"description",role:"columnheader",columnWidth:k("description"),isNonEditable:w("description"),isLastColumn:n&&"description"===n[n.length-1],children:(0,m.jsx)(xn,{children:r||"Description"})})]}),(null==n?void 0:n.includes("sessionValue"))&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hn,{handleResize:t,showColumns:n,currentWidth:l,prevColumn:"value",nextColumn:"sessionValue",parentWidth:x}),(0,m.jsx)(Cn,{type:"sessionValue",role:"columnheader",columnWidth:k("sessionValue"),isNonEditable:w("sessionValue"),isLastColumn:n&&"sessionValue"===n[n.length-1],children:(0,m.jsx)(xn,{children:s||"Current value"})})]}),u.includes("sessionValue")&&(0,m.jsx)(Vn,{allowedColumns:u,persistAll:p,resetAll:h,disablePersistActionTooltip:g,disableResetActionTooltip:f,disableVariablePersistAction:b,disableVariableResetAction:v}),(null==n?void 0:n.includes("options"))&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(hn,{handleResize:t,showColumns:n,currentWidth:l,prevColumn:"value",nextColumn:"options",parentWidth:x}),(0,m.jsx)(Cn,{type:"options",role:"columnheader",columnWidth:k("options"),isNonEditable:w("options"),isLastColumn:n&&"options"===n[n.length-1],children:(0,m.jsx)(xn,{children:c||"Options"})})]})]})]})})}const Sn=["defaultValue","entityType","values","onChange","showColumns","nonEditableKeys","nonEditableValues","nonEditableDescriptions","nonEditableToggles","nonEditableOptions","keyHeading","valueHeading","sessionHeading","optionsHeading","optionsTooltip","nonEditableVariableTypes","hideBulkOptions","maskStatesMap","toggleMaskValue","initialColumnWidths","disableVariablePersistAction","disableVariableResetAction","disableSecretVariablesSync","disablePersistActionTooltip","disableResetActionTooltip","onDeleteRow","disallowDuplicates"],En=r().div.withConfig({displayName:"key-value-form-editor__StyledKeyValueFormEditor",componentId:"sc-1xhynph-0"})(["display:flex;flex:1;flex-direction:column;border-top:thin solid var(--border-color-default);min-height:0;"]);function Tn(e){let{defaultValue:n="",entityType:l,values:o,onChange:a,showColumns:r,nonEditableKeys:s,nonEditableValues:d,nonEditableDescriptions:u,nonEditableToggles:p,nonEditableOptions:h,keyHeading:b,valueHeading:g,sessionHeading:v,optionsHeading:f,optionsTooltip:y,nonEditableVariableTypes:x,hideBulkOptions:C,maskStatesMap:w,toggleMaskValue:k,initialColumnWidths:V,disableVariablePersistAction:j,disableVariableResetAction:S,disableSecretVariablesSync:E,disablePersistActionTooltip:T,disableResetActionTooltip:R,onDeleteRow:_,disallowDuplicates:D}=e,Z=(0,c.Z)(e,Sn);const M={showColumns:r,allowedColumns:Z.allowedColumns,nonEditableKeys:s,nonEditableValues:d,nonEditableDescriptions:u,nonEditableToggles:p,nonEditableOptions:h,hideBulkOptions:C},N=(0,i.useRef)(a);N.current=a;const[A,W]=(0,i.useState)(function(e,n){let l;return n?l=n:(l=new Array(e.length).fill(Math.floor(100/e.length)),l[l.length-1]=l.at(-1)+(100-l.reduce(((e,n)=>e+n)))),l}(r,V)),F=(0,i.useCallback)(((e,t={})=>{let i="text";"environment"!==l&&"globals"!==l||(i="default"),"collection"===l&&(i="string");const o={key:t.key||n,value:t.value||n,description:t.description||n,type:t.type||i,id:e};return Z.allowedColumns.includes("sessionValue")&&(o.sessionValue=t.sessionValue||null),Z.disableToggle||(o.enabled=!0),o}),[n,Z.disableToggle,l,Z.allowedColumns]),P=(0,i.useCallback)((()=>{if(o.length>0){var e=null==o?void 0:o.reduce((function(e,n){return e.id>=n.id?e:n}),{});return n=e,[Object,Array].includes((n||{}).constructor)&&0===Object.entries(n||{}).length?0:e.id+1}var n;return 0}),[o]),I=(0,i.useCallback)(((e,n)=>{const l=[...o],i=l.length===e?[...l,F(P(),n)]:l.map((l=>l.id===e?(0,t.Z)({},l,n):(0,t.Z)({},l)));null==N.current||N.current(i)}),[o,F,P]),z=(0,i.useCallback)((e=>{const n=[...o],l=null==n?void 0:n.filter(((n={})=>n.id!==e));_&&_(e),null==N.current||N.current(l)}),[o,_]),B=(0,m.jsx)(jn,(0,t.Z)({},M,{keyHeading:b||"Key",valueHeading:g||"Value",sessionHeading:v||"Current value",optionsHeading:f||"Options",optionsTooltip:y,nonEditableVariableTypes:x,handleWidthChange:W,currentWidth:A,persistAll:()=>{if(j)return;let e=!1;const n=o.reduce(((n,l)=>{const i=l.enabled?l.sessionValue:l.value;return l.isSessionValueDeleted?(e=!0,n):(!e&&(e=!(E&&l.type===$)),E&&l.type===$?n.push(l):n.push((0,t.Z)({},l,{value:i})),n)}),[]);e&&(null==N.current||N.current(n))},resetAll:()=>{if(S)return;let e=!1;const n=o.map((n=>{const l=n.enabled?n.value:n.sessionValue;return E&&n.type===$?n:(e=!0,(0,t.Z)({},n,{sessionValue:l,isSessionValueDeleted:!1}))}));e&&(null==N.current||N.current(n))},disableVariablePersistAction:j,disableVariableResetAction:S,disablePersistActionTooltip:T,disableResetActionTooltip:R})),O=(0,i.useMemo)((()=>Z.disableCreate?o:[...o,F(P())]),[o,Z.disableCreate,F,P]),H=(0,i.useMemo)((()=>D?O.map(((e,n)=>{if(e.enabled&&""!==e.key)for(let l=n+1;l<O.length;l++){const n=O[l];if(e.key===n.key&&n.enabled&&""!==n.key)return(0,t.Z)({},e,{isOverridden:!0})}return(0,t.Z)({},e,{isOverridden:!1})})):null),[O,D]);return(0,m.jsxs)(En,{children:[o.length>0||!Z.disableCreate?B:null,(0,m.jsx)(rn,(0,t.Z)({},M,Z,{nonEditableVariableTypes:x,values:O,onChange:I,onRemove:z,currentWidth:A,maskStatesMap:w,toggleMaskValue:k,onPersist:e=>{if(j)return;let n=!1;const l=o.reduce(((l,i)=>{if(i.id===e){if(i.isSessionValueDeleted)return n=!0,l;E&&i.type===$?l.push(i):(n=!0,l.push((0,t.Z)({},i,{value:i.sessionValue})))}else l.push(i);return l}),[]);n&&(null==N.current||N.current(l))},onReset:e=>{if(S)return;let n=!1;const l=o.map((l=>l.id!==e||E&&l.type===$?l:(n=!0,(0,t.Z)({},l,{sessionValue:l.value,isSessionValueDeleted:!1}))));n&&(null==N.current||N.current(l))},onBlur:(e,n,l)=>{const i=o.findIndex((n=>n.id===e)),a=-1!==i&&o[i].sessionValue;let r;"value"===n&&-1!==i&&null===a&&l.value&&(r=[...o],r[i]=(0,t.Z)({},l,{sessionValue:l.value}),null==N.current||N.current(r))},disableVariablePersistAction:j,disableVariableResetAction:S,disableSecretVariablesSync:E,disablePersistActionTooltip:T,disableResetActionTooltip:R,duplicateWarningsMap:H}))]})}var Rn=l(34967);const _n=Z(((e,...n)=>e(...n)),100),Dn=({onSearchValueChange:e})=>{const[n,l]=(0,i.useState)("");return(0,m.jsx)("div",{className:"search-variable",children:(0,m.jsx)(Rn.Z,{placeholder:"Filter variables",value:n,type:"search",onChange:n=>{l(n.target.value),_n(e,n.target.value)},onClear:()=>{l(""),e("")},prefix:!0,name:"filter-values"})})};function Zn(e,n){try{const l=(0,J.castNonStringTypesToString)(e),t=(0,J.castNonStringTypesToString)(n),i=l.toLowerCase(),o=t.toLowerCase();return i.indexOf(o)}catch(l){return console.error("PatterSearch~caseInsensitiveIndexof: Failed with error",l,e,n),-1}}const Mn=r().div.withConfig({displayName:"key-value-editor__KeyValueEditorContainer",componentId:"sc-4h8dgj-0"})(["padding-bottom:var(--spacing-s);display:flex;flex-direction:column;box-sizing:border-box;",";&.is-filterable{display:flex;flex-direction:column;}.search-variable{width:240px;padding-top:var(--spacing-xs);padding-bottom:var(--spacing-s);}"],(({enableScroll:e})=>e&&"height: 100%;")),Nn=(e,n)=>!n||!(!e.key||-1===Zn(e.key,n))||"secret"!==e.type&&(!(!e.value||-1===Zn(e.value,n))||!(!e.sessionValue||-1===Zn(e.sessionValue,n))||void 0),An=(e,n)=>{if(!n)return null;const l=[];for(const[t,i]of e.entries())Nn(i,n)&&l.push(t);return l},Wn=(0,d.observer)((function(e){const{values:n,onChange:l,tableName:o,disallowDuplicates:a,allowedColumns:r,showColumns:d,onColumnToggle:c,keyPlaceholder:u,valuePlaceholder:p,maskStatesMap:h,toggleMaskValue:b,initialColumnWidths:g,enableFiltering:v=!1,enableScroll:f,isDirty:y=!1}=e,[x,C]=(0,i.useState)([]),[w,k]=(0,i.useState)(""),[V,j]=(0,i.useState)(null),S=(0,i.useRef)(y),E=(0,i.useCallback)((e=>{if(0===x.length)return!0;e.preventDefault();const t=null==n?void 0:n.filter(((e,n)=>!(null!=x&&x.includes(n))));x.sort(),0!==x[0]&&(x.length,n.length),C([]),l(t)}),[n,l,x]),T=(0,i.useCallback)((()=>{x.length>0&&C([])}),[x]),R=(0,i.useMemo)((()=>{let e=0;return(0,s.computed)((()=>null==n?void 0:n.map((n=>(0,t.Z)({},n,{id:e++})))))}),[n]).get();return(0,i.useEffect)((()=>{const e=An(R,w);j(e)}),[w]),(0,i.useEffect)((()=>{if(S.current&&!y){const e=An(R,w);j(e)}S.current=y}),[y]),(0,m.jsxs)(Mn,{role:"table","aria-label":o,enableScroll:f,children:[v&&(0,m.jsx)(Dn,{onSearchValueChange:k}),(0,m.jsx)(Tn,(0,t.Z)({},e,{disallowDuplicates:a,onChange:l,values:R,selectedRows:x,deleteSelectedRows:E,onBeforeInput:T,allowedColumns:r,showColumns:d,onColumnToggle:c,keyPlaceholder:void 0===u?"Key":u,valuePlaceholder:void 0===p?"Value":p,descriptionPlaceholder:"Description",maskStatesMap:h,toggleMaskValue:b,initialColumnWidths:g,filteredIndices:V,searchValue:w,onDeleteRow:e=>{if(!w)return;const n=((e,n)=>{const l=[],t=new Set(n);let i=0;for(const n of e)t.has(n)?i++:l.push(n-i);return l})(V,[e]);j(n)}})),(0,m.jsx)(Le.Modals.Ui.ModalDialog,{uid:"kv-editor-variable-type-change-confirmation"})]})})),Fn=e=>(0,m.jsx)(Wn,(0,t.Z)({},e))},623180:(e,n,l)=>{l.d(n,{Z:()=>d});var t=l(607560),i=l(540540),o=l.n(i),a=l(700207),r=o().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("g",{clipPath:"url(#clip0)"},o().createElement("path",{d:"M6.56065 5.85356L9.70711 2.70711L9 2L5.85355 5.14645L2.70711 2.00002L2 2.70712L5.14644 5.85356L2 9L2.70711 9.70711L5.85355 6.56067L9 9.70712L9.70711 9.00002L6.56065 5.85356Z",fill:"#6B6B6B"})),o().createElement("defs",null,o().createElement("clipPath",{id:"clip0"},o().createElement("rect",{width:"12",height:"12",fill:"white"})))),s=o().forwardRef((function(e,n){return o().createElement(a.Z,(0,t.Z)({},e,{svg:r,ref:n}))}));s.getName=function(){return"icon-action-close-stroke-small"};const d=s},829225:(e,n,l)=>{l.d(n,{Z:()=>d});var t=l(607560),i=l(540540),o=l.n(i),a=l(700207),r=o().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 8C1 6.89543 1.89543 6 3 6C4.10457 6 5 6.89543 5 8C5 9.10457 4.10457 10 3 10C1.89543 10 1 9.10457 1 8ZM3 7C2.44772 7 2 7.44772 2 8C2 8.55228 2.44772 9 3 9C3.55228 9 4 8.55228 4 8C4 7.44772 3.55228 7 3 7Z",fill:"#6B6B6B"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 8C6 6.89543 6.89543 6 8 6C9.10457 6 10 6.89543 10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#6B6B6B"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 6C11.8954 6 11 6.89543 11 8C11 9.10457 11.8954 10 13 10C14.1046 10 15 9.10457 15 8C15 6.89543 14.1046 6 13 6ZM12 8C12 7.44772 12.4477 7 13 7C13.5523 7 14 7.44772 14 8C14 8.55228 13.5523 9 13 9C12.4477 9 12 8.55228 12 8Z",fill:"#6B6B6B"})),s=o().forwardRef((function(e,n){return o().createElement(a.Z,(0,t.Z)({},e,{svg:r,ref:n}))}));s.getName=function(){return"icon-action-options-stroke"};const d=s}}]);
//# sourceMappingURL=8381.ea4f37b2a934635f.js.map