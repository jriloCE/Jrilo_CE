"use strict";(self.webpackChunkcollection_runner=self.webpackChunkcollection_runner||[]).push([[4893,7560,2389,4100,8827,7658],{7560:(e,t,o)=>{function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}o.d(t,{Z:()=>n})},98283:(e,t,o)=>{function n(e,t){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}o.d(t,{Z:()=>n})},44893:(e,t,o)=>{o.r(t),o.d(t,{NativeScriptEditor:()=>R,NativeScriptEditorButtons:()=>G,Storages:()=>f,VSCodeCommunicationsService:()=>i,VSCodeKVAbstractStorage:()=>I,VSCodeKVInMemoryStorage:()=>C,VSCodeKVPermanentStorage:()=>T,VSCodeLink:()=>v,extendAppThemeTokens:()=>y,extendVSCodeThemeTokens:()=>h,helpers:()=>n,onTabTitleChange:()=>E,onWorkspaceChange:()=>b,openVSCodeFilePicker:()=>N,openVSCodeSaveFileDialog:()=>A,updateVSCodeWorkspace:()=>k,useNativeScriptEditor:()=>M,vsCodeOpenExternalLink:()=>S,vscodeNavigate:()=>m,vscodeUtils:()=>r});var n={};function r(){return"vscode-utils"}o.r(n),o.d(n,{simulateSaveKeyPress:()=>P});var s=o(60398);const i=new class{constructor(){this.vsCodeApi=void 0,this.subscribers=new Map,this.handleExtensionMessages=e=>{var t;const o=e.data,{type:n,payload:r}=o;(null!=(t=this.subscribers.get(n))?t:[]).map((e=>e(r)))},"function"==typeof globalThis.acquireVsCodeApi&&(this.vsCodeApi=globalThis.acquireVsCodeApi())}init(){window.addEventListener("message",this.handleExtensionMessages.bind(this))}cleanup(){this.subscribers.clear();const e=this.handleExtensionMessages.bind(this);return window.removeEventListener("message",e)}subscribe(e,t){var o;return this.subscribers.set(e,[...null!=(o=this.subscribers.get(e))?o:[],t]),()=>{var o;this.subscribers.has(e)&&this.subscribers.set(e,(null!=(o=this.subscribers.get(e))?o:[]).filter((e=>e!==t)))}}postMessageToExtension(e){var t;null==(t=this.vsCodeApi)||t.postMessage(e)}postMessageToExtensionAsPromise(e){const t=(0,s.v4)();return this.postMessageToExtension({type:"promise-message",payload:{uid:t,originalMessage:e}}),new Promise((e=>{const o=this.subscribe(`promise-message-${t}`,(t=>{o(),e(t)}))}))}};i.init();var a=o(7560),c=o(98283),l=o(40540),d=o.n(l),u=o(60607),p=o(52322);const g=["children","to"],v=e=>{let{children:t,to:o}=e,n=(0,c.Z)(e,g);const r=()=>{n.customNavEvent&&i.postMessageToExtension({type:n.customNavEvent,payload:{to:o.toString(),params:{}}})};return n["customNavEvent-updateURL"]?(0,p.jsx)(u.Link,(0,a.Z)({to:o,onClick:r},n,{children:t})):(0,p.jsx)("a",(0,a.Z)({href:"/#",onClick:r},n,{children:t}))},h=(e,t)=>(0,a.Z)({},e,{"base-color-info":`var(--vscode-button-background, ${e["base-color-info"]})`,"highlight-background-color-info":`var(--vscode-button-hoverBackground, ${e["highlight-background-color-info"]})`,"highlight-background-color-primary":`var(--vscode-list-hoverBackground, ${e["highlight-background-color-primary"]})`,"highlight-background-color-secondary":`var(--vscode-list-hoverBackground, ${e["highlight-background-color-secondary"]})`,"content-color-constant":`var(--vscode-button-foreground, ${e["content-color-constant"]})`,"content-color-primary":`var(--vscode-editor-foreground, var(--vscode-foreground, ${e["content-color-primary"]}))`,"content-color-secondary":`var(--vscode-sideBar-foreground, var(--vscode-foreground, ${e["content-color-secondary"]}))`,"background-color-primary":`var(--vscode-editor-background, ${e["background-color-primary"]})`,"background-color-secondary":`var(--vscode-sideBar-background, ${e["background-color-secondary"]})`,"background-color-tertiary":`var(--vscode-settings-dropdownBackground, ${e["background-color-tertiary"]})`,"highlight-background-color-tertiary":`var(--vscode-list-hoverBackground, ${e["highlight-background-color-tertiary"]})`,"button-primary-background-color":`var(--vscode-button-background, ${e["button-primary-background-color"]})`,"button-primary-content-color":`var(--vscode-button-foreground, ${e["button-primary-content-color"]})`,"button-primary-hover-background-color":`var(--vscode-button-hoverBackground, ${e["button-primary-hover-background-color"]})`,"button-primary-active-background-color":`var(--vscode-button-background, ${e["button-primary-active-background-color"]})`,"button-secondary-active-background-color":`var(--vscode-button-secondaryBackground, ${e["button-secondary-active-background-color"]})`,"border-color-default":"var(--postman-vscode-border-color-default)","border-color-strong":"var(--postman-vscode-border-color-strong)","tab-selected-border":`inset 0px -2px 0px var(--vscode-button-background, ${e["tab-selected-border"]})`,"postman-vscode-border-color-default":"rgba(128, 128, 128, .40)","postman-vscode-border-color-strong":"rgba(128, 128, 128, .80)","code-editor-background":"var(--vscode-editor-background)","code-editor-lineHighlightBackground":"var(--vscode-editor-lineHighlightBackground, var(--background-color-tertiary))"}),y=(e,t)=>(0,a.Z)({},e,{"content-color-patch-method":`${"dark"===t.type?e["purple-30"]:e["purple-60"]}`,"content-color-options-method":`${"dark"===t.type?e["pink-40"]:e["pink-60"]}`,"request-url-highlight-border-color":`${"dark"===t.type?e["blue-50"]:e["blue-30"]}`,"runner-summary-vertical-bar-hover-background-color":`${"dark"===t.type?e["grey-00"]:"#282828"}`,"background-color-primary-rgb":"dark"===t.type?"33 33 33":"255 255 255"}),m=(e,t,o)=>{if(null!=t&&t.state&&"string"==typeof t.state)try{t.state=JSON.parse(t.state)}catch(e){}i.postMessageToExtension({type:o.customNavEvent,payload:{to:e,params:t||{},options:o}})},b=e=>{i.postMessageToExtension({type:"WORKSPACE_SWITCH",payload:{workspaceId:e}})},E=(e,t,o)=>{const{isDirty:n,isConflicted:r}=(0,a.Z)({isDirty:!1,isConflicted:!1},o);i.postMessageToExtension({type:"SET_TAB_METADATA",payload:{title:e,type:t,tabState:{isDirty:n,isConflicted:r}}})},f={KV:"KV"};class I{constructor(e=f.KV,t){this.storageType=void 0,this._storageMessageType=t,this.storageType=e}async setItem(e,t){await i.postMessageToExtensionAsPromise({type:this._storageMessageType,payload:{method:"setItem",storageType:this.storageType,key:e,value:t}})}async getItem(e){return await i.postMessageToExtensionAsPromise({type:this._storageMessageType,payload:{method:"getItem",storageType:this.storageType,key:e}})}async removeItem(e){await i.postMessageToExtensionAsPromise({type:this._storageMessageType,payload:{method:"removeItem",storageType:this.storageType,key:e}})}async clearAll(){await i.postMessageToExtensionAsPromise({type:this._storageMessageType,payload:{method:"clearAll",storageType:this.storageType}})}}class C extends I{constructor(e=f.KV){super(e,"SESSION_STORAGE")}}class T extends I{constructor(e=f.KV){super(e,"PERMANENT_STORAGE")}}async function S(e){await i.postMessageToExtensionAsPromise({type:"OPEN_EXTERNAL_LINK",payload:{url:e}})}const k=e=>{i.postMessageToExtension({type:"UPDATE_WORKSPACE",payload:{workspaceId:e}})};async function N(e){return await i.postMessageToExtensionAsPromise({type:"OPEN_FILE_PICKER",payload:e})}async function A(e){return await i.postMessageToExtensionAsPromise({type:"SHOW_SAVE_DIALOG",payload:e})}let w=function(e){return e.NOT_INITIALIZED="NOT_INITIALIZED",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.ERROR="ERROR",e.DISPOSING="DISPOSING",e}({});var _=o(56880);const x=["onSave","onClose","onContentChange"];class O{constructor(e){this.id=null,this.config=void 0,this.disposables=void 0,this.state=void 0,O.isSupported()||console.error("VSCodeNativeScriptEditor is not supported"),this.config=this.sanitizeConfig(e),this.disposables=[],this.state=w.NOT_INITIALIZED}onSaveFromExtension(e){var t,o;e.documentId===this.id&&(null==(t=(o=this.config).onSave)||t.call(o,e.content))}onCloseFromExtension(e){if(e.documentId===this.id){var t,o;for(const e of this.disposables)e();this.state=w.NOT_INITIALIZED,null==(t=(o=this.config).onClose)||t.call(o)}}onContentChangeFromExtension(e){var t,o;e.documentId===this.id&&(null==(t=(o=this.config).onContentChange)||t.call(o,e.content))}async initialize(){try{_.AnalyticsService.addEventV2((0,a.Z)({category:"native-script-editor",action:"open",label:"trigger"},this.config.analyticsMetaData));const e=this.config,t=(0,c.Z)(e,x),o=await i.postMessageToExtensionAsPromise({type:"OPEN_NATIVE_SCRIPT_EDITOR",payload:t});return o?(_.AnalyticsService.addEventV2((0,a.Z)({category:"native-script-editor",action:"open",label:"success"},this.config.analyticsMetaData)),this.id=o,this.disposables.push(i.subscribe("SAVE_NATIVE_SCRIPT_FROM_EXTENSION",this.onSaveFromExtension.bind(this)),i.subscribe("NATIVE_SCRIPT_CONTENT_CHANGE_FROM_EXTENSION",this.onContentChangeFromExtension.bind(this)),i.subscribe("CLOSE_NATIVE_SCRIPT_EDITOR_FROM_EXTENSION",this.onCloseFromExtension.bind(this))),this.state=w.INITIALIZED,o):(console.error("Failed to open native script editor"),_.AnalyticsService.addEventV2((0,a.Z)({category:"native-script-editor",action:"open",label:"fail"},this.config.analyticsMetaData)),null)}catch(e){return console.error(e),this.state=w.ERROR,null}}async updateContentFromApp(e){return this.id?await i.postMessageToExtensionAsPromise({type:"NATIVE_SCRIPT_CONTENT_CHANGE_FROM_APP",payload:{content:e,documentId:this.id}}):(console.error("NativeScriptEditor: updateContentFromApp: documentId is null"),!1)}async saveContentFromApp(e){return this.id?await i.postMessageToExtensionAsPromise({type:"SAVE_NATIVE_SCRIPT_FROM_APP",payload:{content:e,documentId:this.id}}):(console.error("NativeScriptEditor: saveContentFromApp: documentId is null"),!1)}async focusDocumentOnExtensionFromApp(){return this.id?(_.AnalyticsService.addEventV2((0,a.Z)({category:"native-script-editor",action:"focus"},this.config.analyticsMetaData)),await i.postMessageToExtensionAsPromise({type:"FOCUS_SCRIPT_IN_IDE_FROM_APP",payload:{documentId:this.id}})):(console.error("NativeScriptEditor: focusDocumentOnExtensionFromApp: documentId is null"),!1)}async dispose(){for(const e of this.disposables)e();if(this.id){_.AnalyticsService.addEventV2((0,a.Z)({category:"native-script-editor",action:"close",label:"trigger_from_extension"},this.config.analyticsMetaData)),this.state=w.DISPOSING;const e=await i.postMessageToExtensionAsPromise({type:"CLOSE_NATIVE_SCRIPT_EDITOR_FROM_APP",payload:{documentId:this.id}});return this.state=e?w.NOT_INITIALIZED:w.ERROR,e}return!1}getCurrentState(){return this.state}static isSupported(){return!0}sanitizeConfig(e){var t;if(e.onSave&&!(e.onSave instanceof Function))throw new TypeError("onSave must be a function");if(e.onClose&&!(e.onClose instanceof Function))throw new TypeError("onClose must be a function");if(e.onContentChange&&!(e.onContentChange instanceof Function))throw new TypeError("onContentChange` must be a function");if(e.content&&"string"!=typeof e.content)throw new TypeError("content must be a string");if(e.fileName&&"string"!=typeof e.fileName)throw new TypeError("fileName must be a string");return{onSave:e.onSave,onClose:e.onClose,onContentChange:e.onContentChange,content:"string"==typeof e.content?e.content:"",fileName:"string"==typeof e.fileName?e.fileName:"",isPreRequestScript:!!e.isPreRequestScript,analyticsMetaData:null!=(t=e.analyticsMetaData)?t:{}}}}const R=O,M=(e,t=[])=>{var o;const[n,r]=(0,l.useState)(!1),[s,i]=(0,l.useState)(null),[a,c]=(0,l.useState)(w.NOT_INITIALIZED),d=(0,l.useRef)(null),u=(0,l.useRef)(!1),p=(0,l.useRef)(!1),g=(0,l.useRef)(null!=(o=e.content)?o:""),v=(0,l.useRef)(e.onClose),h=(0,l.useCallback)((()=>{c(w.DISPOSING),p.current=!1,u.current=!1,g.current="",d.current=null,c(w.NOT_INITIALIZED),i(null)}),[]),y=(0,l.useCallback)((async()=>{if(!r)return null;c(w.INITIALIZING);const{onContentChange:t,onSave:o,onClose:n}=e;return e.onSave=e=>{e===g.current?P():(p.current=!0,o instanceof Function?o(e):t instanceof Function&&(null==t||t(e)))},e.onContentChange=e=>{u.current=!0,t instanceof Function&&(null==t||t(e))},v.current=n,e.onClose=()=>{h(),null==n||n()},await(async e=>{try{d.current=new R(e);const t=await d.current.initialize();return i(t),c(w.INITIALIZED),t}catch(e){return console.error(e),c(w.ERROR),null}})(e)}),[n,e,...t]),m=(0,l.useCallback)((async e=>!!d.current&&await d.current.updateContentFromApp(e)),[]),b=(0,l.useCallback)((()=>{var e;c(w.DISPOSING),null==(e=d.current)||e.dispose(),h(),null==v.current||v.current(),c(w.NOT_INITIALIZED)}),[h]),E=(0,l.useCallback)((()=>!!d.current&&d.current.focusDocumentOnExtensionFromApp()),[]);return(0,l.useLayoutEffect)((()=>{r(R.isSupported()),i(null),d.current=null}),[]),(0,l.useEffect)((()=>{var t;if(g.current=null!=(t=e.content)?t:"",p.current)return p.current=!1,void P();u.current?u.current=!1:m(g.current)}),[e.content,m]),(0,l.useEffect)((()=>{function e(e){var t;e._shouldIgnore||(e.ctrlKey||e.metaKey)&&"s"===e.key&&(null==(t=d.current)?void 0:t.saveContentFromApp)instanceof Function&&d.current.saveContentFromApp(g.current)}function t(){"visible"===document.visibilityState?window.addEventListener("keydown",e):window.removeEventListener("keydown",e)}return t(),document.addEventListener("visibilitychange",t),()=>{var o;document.removeEventListener("visibilitychange",t),window.removeEventListener("keydown",e),null==(o=d.current)||o.dispose()}}),[]),{isNativeEditorSupported:n,editorState:a,initialize:y,documentID:s,dispose:b,sendLatestContentToExtension:m,focusDocument:E}},P=()=>{const e=new KeyboardEvent("keydown",{key:"s",code:"KeyS",ctrlKey:!0,bubbles:!0,cancelable:!0});e._shouldIgnore=!0,window.dispatchEvent(e)};var L=o(207),Z=d().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6C0 6 2.25 10.5 6 10.5C9.75 10.5 12 6 12 6C12 6 10.125 1.5 6 1.5C1.875 1.5 0 6 0 6ZM1.12951 5.96673C1.15871 5.91242 1.191 5.85388 1.22641 5.79171C1.4427 5.41188 1.76854 4.90812 2.2057 4.4085C3.08754 3.40069 4.33625 2.5 6 2.5C7.66375 2.5 8.91246 3.40069 9.7943 4.4085C10.2315 4.90812 10.5573 5.41188 10.7736 5.79171C10.809 5.85388 10.8413 5.91242 10.8705 5.96673C10.8336 6.02761 10.7924 6.09389 10.7471 6.16474C10.4997 6.55199 10.1357 7.06521 9.6691 7.57428C8.71211 8.61826 7.46057 9.5 6 9.5C4.53943 9.5 3.28789 8.61826 2.3309 7.57428C1.86426 7.06521 1.50027 6.55199 1.25285 6.16474C1.20759 6.09389 1.16645 6.02761 1.12951 5.96673Z",fill:"#6B6B6B"}),d().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7.25C6.69036 7.25 7.25 6.69036 7.25 6C7.25 5.30964 6.69036 4.75 6 4.75C5.30964 4.75 4.75 5.30964 4.75 6C4.75 6.69036 5.30964 7.25 6 7.25ZM6 8.25C7.24264 8.25 8.25 7.24264 8.25 6C8.25 4.75736 7.24264 3.75 6 3.75C4.75736 3.75 3.75 4.75736 3.75 6C3.75 7.24264 4.75736 8.25 6 8.25Z",fill:"#6B6B6B"})),D=d().forwardRef((function(e,t){return d().createElement(L.Z,(0,a.Z)({},e,{svg:Z,ref:t}))}));D.getName=function(){return"icon-action-view-stroke-small"};const F=D;var V=o(23180),B=o(71453),$=o(80429),j=o(59530);const K=o.n(j)().div.withConfig({displayName:"native-script-editor-buttons__IconContainer",componentId:"sc-9x54ey-0"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:var(--spacing-xs);right:var(--spacing-xl);z-index:10;column-gap:var(--spacing-xs);"]),G=({onInitialize:e,onClose:t,onFocus:o,editorState:n})=>{if("function"!=typeof e)throw new TypeError("onInitialize is not a function");if("function"!=typeof t)throw new TypeError("onClose is not a function");if("function"!=typeof o)throw new TypeError("onFocus is not a function");return n===w.INITIALIZED?(0,p.jsxs)(K,{children:[(0,p.jsx)($.Z,{variant:"secondary",size:"small",icon:(0,p.jsx)(F,{}),tooltip:"View script",onClick:o}),(0,p.jsx)($.Z,{variant:"secondary",size:"small",icon:(0,p.jsx)(V.Z,{}),tooltip:"Close native editor",onClick:t})]}):n===w.DISPOSING?(0,p.jsx)(K,{children:(0,p.jsx)($.Z,{variant:"secondary",size:"small",icon:(0,p.jsx)(V.Z,{}),tooltip:"Closing editor..."})}):(0,p.jsx)(K,{children:(0,p.jsx)($.Z,{variant:"secondary",size:"small",icon:(0,p.jsx)(B.Z,{}),tooltip:"Open in native editor",onClick:e})})}},23180:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(7560),r=o(40540),s=o.n(r),i=o(207),a=s().createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s().createElement("g",{clipPath:"url(#clip0)"},s().createElement("path",{d:"M6.56065 5.85356L9.70711 2.70711L9 2L5.85355 5.14645L2.70711 2.00002L2 2.70712L5.14644 5.85356L2 9L2.70711 9.70711L5.85355 6.56067L9 9.70712L9.70711 9.00002L6.56065 5.85356Z",fill:"#6B6B6B"})),s().createElement("defs",null,s().createElement("clipPath",{id:"clip0"},s().createElement("rect",{width:"12",height:"12",fill:"white"})))),c=s().forwardRef((function(e,t){return s().createElement(i.Z,(0,n.Z)({},e,{svg:a,ref:t}))}));c.getName=function(){return"icon-action-close-stroke-small"};const l=c}}]);
//# sourceMappingURL=4893.9fc9dd684183eb95.js.map