"use strict";(self.webpackChunkcollection_runner=self.webpackChunkcollection_runner||[]).push([[8243],{74172:(e,t,s)=>{s.d(t,{H:()=>l}),s(40540);var n=s(76285),i=s(35736),r=s(42801),o=s(16669),a=s(52322);const l=({userId:e})=>{const{data:t,isLoading:s}=(0,o.usePublicProfile)({userIds:[e],type:"user"});return e?s?(0,a.jsx)(i.Z,{}):(0,a.jsx)(r.Z,{size:"xs",type:"user",src:null==t?void 0:t[e].profile_pic_url,tooltip:null==t?void 0:t[e].name,alt:null==t?void 0:t[e].name,userId:Number(e)}):(0,a.jsx)(n.Z,{color:"content-color-secondary"})}},8243:(e,t,s)=>{s.d(t,{P:()=>cs});var n=s(40540),i=s.n(n),r=s(59530),o=s.n(r),a=s(72883),l=s(74962),d=s(58560),c=s(80429),u=s(87459),p=s(63622),h=s(25869),m=s(77986);const x=e=>{const t=new Date(Date.now()),s=new Date(e),n=(0,m.differenceInCalendarDays)(t,s),i=s.toTimeString();return 0===n?`today at ${i.split(" ")[0]}`:1===n?`yesterday at ${i.split(" ")[0]}`:`on ${(0,m.format)(s,"MMM.dd,yyyy")} at ${i.split(" ")[0]}`},g=(e,t,s)=>{const n=t&&s?new Date(s).getTime()-new Date(t).getTime():e,i=Math.floor(n/864e5),r=Math.floor(n/36e5%24),o=Math.floor(n/6e4%60),a=Math.floor(n/1e3%60),l=n%1e3;let d="";return i&&(d=`${i}d `),r&&(d=`${d}${r}h `),!i&&o&&(d=`${d}${o}m `),!i&&!r&&a&&(d=`${d}${a}s `),!i&&!r&&!o&&l&&(d=`${d}${l}ms`),d},v=(e,t)=>e&&t?`${Math.round(e/t)} ms`:"-";var y=s(50297),f=s(67490),_=s(74172),b=s(32543),j=s(98276),C=s(38053),I=s(84452),w=s(78476),k=s(69730),S=s(56880),T=s(688),E=s(12511),Z=s(3062),R=s(68414),A=s(62629),N=s(83223),q=s(53186),P=s(10099),D=s(52322);const O=o()(l.Z).withConfig({displayName:"run-results-title__StyledRunTitle",componentId:"sc-1o0u1yj-0"})(["margin-bottom:var(--spacing-s);"]),z=o()(d.Z).withConfig({displayName:"run-results-title__RunResultsActionContainer",componentId:"sc-1o0u1yj-1"})(["float:right;margin-left:auto;gap:var(--spacing-m);"]),H=o().div.withConfig({displayName:"run-results-title__StyledRunAgainButtonContainer",componentId:"sc-1o0u1yj-2"})(["height:fit-content;"]),L=o()(c.Z).withConfig({displayName:"run-results-title__StyledButton",componentId:"sc-1o0u1yj-3"})([":disabled{background-color:var(--button-primary-background-color) !important;color:var(--button-primary-content-color) !important;opacity:0.5;}"]),F=(0,y.observer)((({runAgain:e})=>{var t;const{planFeatures:s}=(0,E.b)(),{resourceUsage:i}=(0,Z.w)(),{messageTemplates:r}=(0,R.A)((null==s?void 0:s.templatePath)||f.df),o=(0,N.v)(),a=(0,P.useActiveWorkspaceId)(),{userCanRunCollection:l}=(0,q.useWorkspacePermissions)(a),[d,c]=(0,n.useState)(!1),u=(0,n.useMemo)((()=>(0,A.Ir)(s,i)),[s,i])||!l,p=(0,n.useMemo)((()=>(0,A.i2)(s,i)),[s,i]),h=null==r||null==(t=r.buttons)||null==(t=t.runAgain)?void 0:t[p],m=(0,n.useMemo)((()=>(0,A.DV)(s,i)),[s,i]);return h?(0,D.jsx)(k.Z,{config:h,trigger:(0,D.jsx)(H,{children:(0,D.jsx)(L,{"data-testid":"runner-results-header-run-again-btn",type:"primary",size:"medium",isLoading:d,onClick:()=>{(async()=>{c(!0);const{planFeatures:t,resourceUsage:s}=await o();try{(0,A.Rf)(t,s),await e()}finally{c(!1)}})()},isDisabled:u,text:"Run Again"})}),variables:m,onLinkClick:e=>{var t;null!=e&&null!=(t=e.analytics)&&t.action&&null!=e&&e.analytics.label&&S.AnalyticsService.addEventV2({category:"runner-summary",action:(0,T.Cu)(e.analytics.action,m),label:(0,T.Cu)(e.analytics.label,m)})}}):(0,D.jsx)(L,{"data-testid":"runner-results-header-run-again-btn",type:"primary",size:"medium",onClick:()=>{e()},isDisabled:u,text:"Run Again"})})),B=(0,y.observer)((({runStatus:e,collectionId:t,folderId:s})=>{const r=(()=>{const e=i().useContext(a._),{data:t}=(0,j.useActiveEnvironment)(),{isEnabled:s}=(0,C.useIsPackageEnabled)();return async()=>{await(null==e.refetchCollectionCache?void 0:e.refetchCollectionCache()),e.runAgain({activeEnvironment:t,options:{isPackageResolverEnabled:s}})}})(),o=(()=>{const e=i().useContext(a._);return async()=>{(0,I.pauseRun)({id:e.executionId}),await(0,w.when)((()=>e.runStatus===f.RG.PAUSED))}})(),l=(()=>{const e=i().useContext(a._);return()=>{e.isAborting=!0,(0,I.abortRun)({id:e.executionId})}})(),d=(()=>{const e=i().useContext(a._);return()=>{(0,I.resumeRun)({id:e.executionId}),e.setRunStatus(f.RG.STARTED)}})(),u=(0,b.XC)(),p=e===f.RG.PAUSED,[m,x]=(0,n.useState)(!1);return e===f.RG.FINISHED||e===f.RG.ERROR||e===f.RG.ABORTED?(0,D.jsxs)(z,{children:[(0,D.jsx)(F,{runAgain:r}),(0,D.jsx)(c.Z,{"data-testid":"runner-results-header-new-run-btn",type:"tertiary",size:"medium",icon:(0,D.jsx)(h.Z,{}),onClick:()=>{u(t,s)},text:"New Run"})]}):(0,D.jsxs)(z,{children:[(0,D.jsx)(c.Z,{"data-testid":"runner-results-header-stop-run-btn",type:"destructive",size:"medium",onClick:()=>{l()},text:"Stop Run"}),(0,D.jsx)(c.Z,{"data-testid":"runner-results-header-pause-run-btn",type:"secondary",size:"medium",isDisabled:m,onClick:async()=>{p?d():(x(!0),await o(),x(!1))},text:p?"Resume":"Pause"})]})})),K=o().div.withConfig({displayName:"run-results-title__SubComponentSeperator",componentId:"sc-1o0u1yj-4"})(["width:2px;height:2px;background:var(--content-color-tertiary);border-radius:50px;"]),M=o()(c.Z).withConfig({displayName:"run-results-title__SecondaryButton",componentId:"sc-1o0u1yj-5"})(["color:var(--content-color-secondary);"]),G=o().div.withConfig({displayName:"run-results-title__StyledBadgeContainer",componentId:"sc-1o0u1yj-6"})(["margin-bottom:var(--spacing-s);margin-left:var(--spacing-xs);"]),V=(0,y.observer)((({collectionId:e,collectionName:t,folderId:s,timestamp:r,runStatus:o,createdBy:l})=>{const c=(()=>{const e=i().useContext(a._),{isEnabled:t}=(0,C.useIsPackageEnabled)();return s=>{e.isPastExecution||e.startRun({activeEnvironment:s,options:{isPackageResolverEnabled:t}})}})(),{data:h,isLoading:m,isError:g}=(0,j.useActiveEnvironment)();(0,n.useEffect)((()=>{if(g)throw new Error("Failed to fetch environment details");m||g||c(h)}),[m]);const v=(0,b.rV)();return(0,D.jsxs)(d.Z,{width:"100%",padding:{paddingBottom:"spacing-s",paddingLeft:"spacing-l",paddingRight:"spacing-l",paddingTop:"spacing-s"},"data-testid":"runner-results-title",children:[(0,D.jsxs)(d.Z,{direction:"column",gap:"spacing-s",padding:{paddingTop:"spacing-s"},children:[(0,D.jsxs)(d.Z,{gap:"spacing-xs",alignItems:"center",children:[(0,D.jsx)(O,{type:"h4",text:`${t} - Run results`}),(0,D.jsx)(G,{children:o===f.RG.ERROR?(0,D.jsx)(u.Z,{status:"critical",text:"ERROR","data-testid":"run-collection-error"}):o===f.RG.ABORTED?(0,D.jsx)(u.Z,{status:"neutral",text:"ABORTED","data-testid":"run-collection-aborted"}):(0,D.jsx)(D.Fragment,{})})]}),(0,D.jsxs)(d.Z,{alignItems:"center",gap:"spacing-s",children:[(0,D.jsx)(_.H,{userId:l}),(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary","data-testid":"runner-results-header-timestamp",children:`Ran ${x(r)}`}),(0,D.jsx)(K,{}),(0,D.jsx)(M,{type:"monochrome-plain",text:"View all runs",onClick:()=>{v(e)}})]})]}),(0,D.jsx)(B,{runStatus:o,collectionId:e,folderId:s})]})}));var $=s(35736);const W=o().span.withConfig({displayName:"environment-info__EnvironmentTextContainer",componentId:"sc-1mh3t5l-0"})(["",""],(e=>e.envId&&"\n    cursor: pointer;\n    h4:hover {\n      text-decoration: underline;\n      color: var(--content-color-info);\n    }\n  ")),U=({activeEnvironment:e})=>{const t=(0,P.useActiveWorkspaceId)(),{data:s,isLoading:n}=(0,j.useEnvironmentItems)({workspaceId:t}),i=(0,b.HH)();return(0,D.jsxs)(d.Z,{direction:"column",alignItems:"flex-start",gap:"spacing-xs",padding:"spacing-s",children:[(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:"Environment"}),n?(0,D.jsx)($.Z,{}):(0,D.jsx)(W,{envId:null==e?void 0:e.id,onClick:()=>{null!=e&&e.id&&i(null==e?void 0:e.id)},children:(0,D.jsx)(l.Z,{"data-testid":"runner-environment-info",type:"h4",color:"content-color-secondary",text:(()=>{if(!e||!s)return"None";if(e&&!e.id)return"None";const t=null==s?void 0:s.find((t=>t.id===e.id));return t?t.name:e.id})()})})]})},J=e=>(0,D.jsxs)(d.Z,{direction:"column",alignItems:"flex-start",gap:"spacing-xs",padding:"spacing-s",children:[(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:e.heading}),(0,D.jsx)(l.Z,{"data-testid":e["data-testid"],type:"h4",color:"content-color-secondary",text:e.text})]}),X=o()(d.Z).withConfig({displayName:"run-info__RunInfoContainer",componentId:"sc-1cqs38r-0"})(["background-color:var(--background-color-secondary);margin-left:var(--spacing-l);margin-right:var(--spacing-l);"]),Q=(0,y.observer)((({source:e,activeEnvironment:t,runStatus:s})=>{const{iterations:n,totalDuration:r,totalRequests:o,totalTestCount:l,startedAt:d,createdAt:c}=(()=>{const e=i().useContext(a._);return{iterations:e.iterationCount,totalDuration:e.totalDuration,totalTestCount:e.totalTestCount,totalRequests:e.executionData.length,startedAt:e.startedAt,updatedAt:e.updatedAt,createdAt:e.createdAt}})(),u=[f.RG.ABORTED,f.RG.FINISHED,f.RG.ERROR].includes(s);return(0,D.jsxs)(X,{alignItems:"center",gap:"spacing-xxxl",wrap:"wrap",basis:"fit-content","data-testid":"run-info-container",children:[(0,D.jsx)(J,{heading:"Source",text:f.vH[e]||e,"data-testid":"runner-source-info"}),(0,D.jsx)(U,{activeEnvironment:t}),(0,D.jsx)(J,{heading:"Iterations",text:u?`${n}`:"...","data-testid":"run-iteration-stats"}),(0,D.jsx)(J,{heading:"Duration",text:u?g(r,d,c):"...","data-testid":"run-duration"}),(0,D.jsx)(J,{heading:"All tests",text:u?`${l}`:"...","data-testid":"run-test-count"}),(0,D.jsx)(J,{heading:"Avg. Resp. Time",text:u?`${v(r,o)}`:"...","data-testid":"run-avg-duration"})]})}));var Y=s(15761),ee=s(27366),te=s(71132);const se=o().div.withConfig({displayName:"test-tab-labels__StyledTabsContainer",componentId:"sc-1px24mx-0"})(["display:flex;"]),ne=o()(Y.Z).withConfig({displayName:"test-tab-labels__StyledTabs",componentId:"sc-1px24mx-1"})(["padding-left:var(--spacing-l);"]),ie=o()(c.Z).withConfig({displayName:"test-tab-labels__StyledButton",componentId:"sc-1px24mx-2"})(["span{width:max-content;margin-right:var(--spacing-l);}"]),re=(0,y.observer)((({activeIndex:e,setActiveIndex:t,setViewSummary:s})=>{const{passedTestCount:n,failedTestCount:r,skippedTestCount:o}=(()=>{const e=i().useContext(a._);return{passedTestCount:e.passedTestCount,failedTestCount:e.failedTestCount,skippedTestCount:e.skippedTestCount}})();return(0,D.jsxs)(se,{children:[(0,D.jsx)(ne,{activeTabIndex:e,onChange:t,type:"primary","data-testid":"run-results-tabs",children:(0,D.jsxs)(ee.Z,{children:[(0,D.jsx)(te.Z,{label:"All Tests"}),(0,D.jsx)(te.Z,{label:`Passed (${n})`}),(0,D.jsx)(te.Z,{label:`Failed (${r})`}),(0,D.jsx)(te.Z,{label:`Skipped (${o})`})]})}),(0,D.jsx)(ie,{type:"monochrome-plain",size:"small",text:"View Summary","data-testid":"view-summary-button",onClick:()=>s(!0)})]})}));var oe=s(494),ae=s(31660),le=s.n(ae),de=s(38313),ce=s(67964),ue=s(84591),pe=s(68004);const he=o().div.withConfig({displayName:"response-badge__StyledMetadataItem",componentId:"sc-19ch3ra-0"})(["box-sizing:border-box;display:inline-flex;align-items:center;background-color:transparent;height:var(--size-xs);width:max-content;"]),me=({code:e,status:t,size:s,time:n,selectedItemIndex:i})=>{if(!e)return null;const r=s<f.$K?`${s} B`:s/f.$K+" KB";return(0,D.jsxs)(d.Z,{direction:"row",gap:"spacing-s","data-testid":"runner-response-badges",children:[(0,D.jsx)(he,{children:(0,D.jsx)(p.ZP,{color:"content-color-secondary",type:"body-small","data-testid":"runner-response-badges_response-status-code",children:`${e} ${t}`})}),null==i&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(he,{children:(0,D.jsx)(p.ZP,{color:"content-color-secondary",type:"body-small","data-testid":"runner-response-badges_response-time",children:`${n} ms`})}),(0,D.jsx)(he,{children:(0,D.jsx)(p.ZP,{color:"content-color-secondary",type:"body-small","data-testid":"runner-response-badges_response-size",children:r})})]})]})},xe=o()(d.Z).withConfig({displayName:"request-test-item__TestErrorMessageContainer",componentId:"sc-162wnfg-0"})(["padding-right:var(--spacing-l);color:var(--content-color-error);&::before{content:'';width:2px;min-width:2px;margin:0 var(--spacing-l) 0 var(--spacing-m);height:28px;background-color:var(--base-color-error);}"]),ge=o()(d.Z).withConfig({displayName:"request-test-item__TestTextContainer",componentId:"sc-162wnfg-1"})(["padding:var(--spacing-xs);line-height:var(--line-height-m);user-select:text;overflow:hidden;max-width:90%;white-space:nowrap;"]),ve=o().div.withConfig({displayName:"request-test-item__ErrorLinkContainer",componentId:"sc-162wnfg-2"})(["padding-left:var(--spacing-xs);"]),ye=o()(d.Z).withConfig({displayName:"request-test-item__EmptyTestContainer",componentId:"sc-162wnfg-3"})(["&::before{content:'';width:var(--border-width-l);min-width:var(--border-width-l);height:calc( var(--size-s) + var(--spacing-xs) );margin:0 var(--spacing-l) 0 var(--spacing-m);background-color:var(--border-color-strong);}"]),fe=o()(d.Z).withConfig({displayName:"request-test-item__FailedTestContainer",componentId:"sc-162wnfg-4"})(["height:calc(var(--size-s) + var(--spacing-xs));width:100%;&::before{content:'';width:var(--border-width-l);min-width:var(--border-width-l);height:100%;margin:0 var(--spacing-l) 0 var(--spacing-m);background-color:var(--base-color-error);}"]),_e=o()(d.Z).withConfig({displayName:"request-test-item__PassedTestContainer",componentId:"sc-162wnfg-5"})(["font-size:var(--text-size-m);height:calc(var(--size-s) + var(--spacing-xs));&::before{content:'';width:var(--border-width-l);min-width:var(--border-width-l);height:100%;margin:0 var(--spacing-l) 0 var(--spacing-m);background-color:var(--base-color-success);}"]),be=o()(d.Z).withConfig({displayName:"request-test-item__SkippedTestContainer",componentId:"sc-162wnfg-6"})(["font-size:var(--text-size-m);height:calc(var(--size-s) + var(--spacing-xs));width:100%;&::before{content:'';width:var(--border-width-l);min-width:var(--border-width-l);height:100%;margin:0 var(--spacing-l) 0 var(--spacing-m);background-color:var(--border-color-strong);}"]),je=o()(d.Z).withConfig({displayName:"request-test-item__TestStatusTextContainer",componentId:"sc-162wnfg-7"})(["width:auto;line-height:var(--line-height-s);padding:var(--spacing-s) var(--spacing-zero) var(--spacing-s) var(--spacing-xs);"]),Ce=o()(d.Z).withConfig({displayName:"request-test-item__TestNameContainer",componentId:"sc-162wnfg-8"})(["line-height:var(--line-height-m);padding:var(--spacing-xs) var(--spacing-zero);flex:1;overflow:hidden;max-width:90%;user-select:text;"]),Ie=e=>e.skipped?"SKIP":e.passed?"PASS":"FAIL",we=({test:e})=>{const t=(e=>!0===e.passed&&!0!==e.skipped?_e:!1===e.passed&&!1===e.skipped?fe:be)(e);let s=e.name;var n,i;return e.error&&(s+=` | ${(null==(n=e.error)?void 0:n.name)||""}: ${(null==(i=e.error)?void 0:i.message)||""}`),(0,D.jsxs)(t,{direction:"row",gap:"spacing-l",alignItems:"center","data-testid":"runner-results__test",children:[e&&(0,D.jsx)(je,{alignItems:"center",direction:"row",children:(0,D.jsx)(p.ZP,{type:"body-small",isTruncated:!0,color:"content-color-secondary","data-testid":"runner-results__test__status",children:Ie(e)})}),(0,D.jsx)(Ce,{alignItems:"center",direction:"row",children:(0,D.jsx)(p.ZP,{type:"body-medium",isTruncated:!0,color:"content-color-secondary","data-testid":"runner-results__test__name",children:s})})]})},ke=(0,y.observer)((({item:e,openConsoleTab:t})=>e.error?(0,D.jsx)(xe,{direction:"row",alignItems:"center","data-testid":"runner-results__test-error",children:(0,D.jsx)(ge,{children:(e=>{const s=f.WD[e];var n;return s&&Array.isArray(s)?(0,D.jsxs)(i().Fragment,{children:[(0,D.jsx)(p.ZP,{type:"body-medium",isTruncated:!0,color:"content-color-error",children:s[0]}),(0,D.jsx)(ve,{children:(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-error",children:(0,D.jsx)("span",{onClick:e=>{e.stopPropagation(),t()},"data-testid":"runner-results__request-card-error-cta",children:(0,D.jsx)(p.ZP,{type:"link-default",color:"content-color-error",children:s[1]})})})})]}):null!=(n=f.nC[e])?n:f.nC[f.vu]})(e.error.type)})}):"running"===e.status?(0,D.jsx)(d.Z,{direction:"row",alignItems:"center","data-testid":"test-item-running-tests",children:(0,D.jsx)(ge,{children:(0,D.jsx)(p.ZP,{color:"content-color-tertiary",typographyStyle:{lineHeight:"line-height-s",fontSize:"text-size-m"},isTruncated:!0,children:"Running request…"})})}):0===e.assertions.length?(0,D.jsx)(ye,{direction:"row",alignItems:"center","data-testid":"test-item-no-tests",children:(0,D.jsx)(ge,{children:(0,D.jsx)(p.ZP,{color:"content-color-secondary",isTruncated:!0,children:"No tests found"})})}):(0,D.jsx)(D.Fragment,{children:e.assertions.map(((e,t)=>(0,D.jsx)(we,{test:e},t)))}))),Se=o()(d.Z).withConfig({displayName:"request-card__RequestCardContainer",componentId:"sc-khgsi6-0"})(["padding-left:var(--spacing-s);padding-right:var(--spacing-s);padding-bottom:var(--spacing-s);.request_card_selected{background-color:var(--highlight-background-color-secondary);}"]),Te=o()(d.Z).withConfig({displayName:"request-card__IterationHeader",componentId:"sc-khgsi6-1"})(["padding-bottom:var(--spacing-s);padding-left:var(--spacing-s);"]),Ee=o().div.withConfig({displayName:"request-card__IterationSeparator",componentId:"sc-khgsi6-2"})(["flex:1;flex-grow:1;background-color:var(--border-color-default);margin-left:var(--spacing-s);height:var(--border-width-default);"]),Ze=o().div.withConfig({displayName:"request-card__RequestCardBody",componentId:"sc-khgsi6-3"})(["padding:var(--spacing-s);border-radius:var(--border-radius-default);background-color:",";&:hover{background-color:var(--highlight-background-color-secondary);cursor:pointer;}"],(e=>e.isSelected?"var(--highlight-background-color-secondary)":"")),Re=o()(d.Z).withConfig({displayName:"request-card__RequestResponseMetadata",componentId:"sc-khgsi6-4"})(["margin-bottom:var(--spacing-s);"]),Ae=o()(d.Z).withConfig({displayName:"request-card__NoResponseContainer",componentId:"sc-khgsi6-5"})(["white-space:nowrap;"]),Ne=(0,y.observer)((({item:e,showIteration:t,index:s,iterationIndex:n,selectedItemIndex:i,setSelectedItemIndex:r,openConsoleTab:o})=>{var a,c,u;const h=(0,b.tl)(),m=e.url,x=m.split(f.Zy);return(0,D.jsxs)(Se,{direction:"column","data-testid":"request-card-container",children:[t&&(0,D.jsxs)(Te,{row:"column",alignItems:"center",children:[(0,D.jsx)(l.Z,{type:"h6",text:`Iteration ${n+1}`,color:"content-color-secondary"}),!i&&(0,D.jsx)(Ee,{})]}),(0,D.jsxs)(Ze,{isSelected:i===s,onClick:()=>{i!==s&&r(s)},"data-testid":"runner-results_request-card",children:[(0,D.jsxs)(d.Z,{direction:"row",gap:"spacing-s",alignItems:"center",children:[(0,D.jsx)(pe.C,{method:e.method,size:"medium"}),(0,D.jsx)(p.ZP,{type:"body-medium",isTruncated:!0,children:(0,D.jsx)("span",{onClick:t=>{t.stopPropagation(),h(e.id)},"data-testid":"runner-results__request-name",children:(0,D.jsx)(p.ZP,{type:"link-subtle",isTruncated:!0,children:e.name})})})]}),(0,D.jsxs)(Re,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:"spacing-l",children:[m?x.map(((e,t)=>(0,D.jsxs)(p.ZP,{type:"body-small",isTruncated:!0,color:"content-color-secondary","data-testid":"request-card-url",children:[e,t===x.length-1?null:(0,D.jsx)("var",{children:f.Zy})]}))):(0,D.jsxs)(d.Z,{alignItems:"center",direction:"row",gap:"spacing-xs",children:[(0,D.jsx)(ue.Z,{}),(0,D.jsx)(p.ZP,{type:"body-small",isTruncated:!0,color:"content-color-secondary","data-testid":"request-card-url",children:"Empty request URL"})]}),e.response?(0,D.jsx)(me,{code:null==(a=e.response)?void 0:a.code,status:null==(c=e.response)?void 0:c.status,time:e.response.responseTime,size:null==(u=e.response.size)?void 0:u.total,selectedItemIndex:i}):"finished"===e.status&&(0,D.jsx)(Ae,{direction:"row",alignItems:"center","data-testid":"request-card-no-response",children:(0,D.jsx)(p.ZP,{color:"content-color-secondary",type:"body-small",children:"No response"})})]}),(0,D.jsx)(d.Z,{direction:"column",children:(0,D.jsx)(ke,{item:e,openConsoleTab:o})})]})]})}));var qe=s(7560);const Pe=()=>{const e=(0,n.useContext)(a._);return(0,n.useCallback)((t=>{const s=[];for(const o of e.executionData){switch(t){case"all-tests":s.push(o);continue;case"passed-tests":{var n;const e=null==(n=o.assertions)?void 0:n.filter((e=>!0===e.passed&&!0!==e.skipped));e.length>0&&s.push((0,qe.Z)({},o,{assertions:e}));continue}case"failed-tests":{var i;const e=null==(i=o.assertions)?void 0:i.filter((e=>!1===e.passed&&!1===e.skipped));e.length>0&&s.push((0,qe.Z)({},o,{assertions:e}));continue}case"skipped-tests":{var r;const e=null==(r=o.assertions)?void 0:r.filter((e=>e.skipped));e.length>0&&s.push((0,qe.Z)({},o,{assertions:e}));continue}}return s}return s}),[e.executionData])},De=({title:e,message:t,illustration:s})=>(0,D.jsxs)(d.Z,{height:"inherit",width:"inherit",alignItems:"center",direction:"column",gap:"spacing-l",children:[s,(0,D.jsx)(l.Z,{type:"h4",text:e}),(0,D.jsx)(p.ZP,{children:t})]});var Oe=s(22833),ze=s.n(Oe);const He=o().div.withConfig({displayName:"iteration-bar__IterationsBarContainer",componentId:"sc-1eujvqq-0"})(["height:inherit;width:inherit;flex:0 0 var(--spacing-xl);background-color:var(--background-color-primary);color:var(--content-color-tertiary);font-size:var(--text-size-xs);border-left:var(--border-width-default) var(--border-style-solid) var(--border-color-default);div{&::-webkit-scrollbar{display:none;}}"]),Le=o().div.withConfig({displayName:"iteration-bar__StyledListContainer",componentId:"sc-1eujvqq-1"})(["display:flex;flex:1;align-items:center;justify-content:center;min-height:var(--size-s);cursor:pointer;&.is-done{color:var(--content-color-primary);&.is-failed{color:var(--content-color-error);}&:hover,&.is-hovered{background-color:var(--highlight-background-color-primary);}}&.is-running{border-top:var(--border-width-default) var(--border-style-solid) var(--border-color-default);background-color:var(--background-color-secondary);}&.is-active{background-color:var(--background-color-tertiary);&:hover,&.is-hovered{background-color:var(--highlight-background-color-tertiary);}}&.is-pending{cursor:default;}"]),Fe=(e,t,s,n,i)=>ze()({"runner-results__iterations__tab":!0,"is-active":e<=i&&e>=n,"is-running":!["finished","error","aborted"].includes(s)&&t===e,"is-pending":e>t,"is-done":e<=t}),Be=({iterationCount:e,currentIteration:t,runStatus:s,visibleStartIndex:n,visibleStopIndex:i,scrollToIteration:r})=>{const o=e=>(0,D.jsx)("div",{style:e.style,"data-testid":"runner-results-iterations-tab",children:(0,D.jsx)(Le,{className:Fe(e.index,t,s,n,i),onClick:()=>{r(e.index)},children:e.index+1},e.index)});return(0,D.jsx)(He,{"data-testid":"iteration-bar-container",children:(0,D.jsx)(le(),{children:({height:t,width:s})=>(0,D.jsx)(oe.FixedSizeList,{height:t,width:s,itemCount:e,itemSize:24,children:o})})})};var Ke=s(82196),Me=s(64495),Ge=s(27162),Ve=s(5246),$e=s(49627),We=s(56415),Ue=s(3341);const Je=({children:e,title:t,renderTitle:s,disabled:n,isOpen:i,onAccordionClick:r,itemKey:o})=>(0,D.jsxs)("div",{className:"accordion-item",children:[(0,D.jsx)("div",{className:"title",onClick:()=>{n||null==r||r(o)},children:"function"==typeof s?s(i):t}),i&&(0,D.jsx)("div",{className:"panel",children:e})]}),Xe=o()(d.Z).withConfig({displayName:"missing-details-empty-state__IconContainer",componentId:"sc-esoovg-0"})(["height:var(--size-xs);width:var(--size-xs);"]),Qe=o()(d.Z).withConfig({displayName:"missing-details-empty-state__Container",componentId:"sc-esoovg-1"})(["max-width:fill-available;"]),Ye=o().div.withConfig({displayName:"missing-details-empty-state__BodyContainer",componentId:"sc-esoovg-2"})(["padding-left:calc(var(--spacing-l) + var(--spacing-xs));"]),et=({icon:e,heading:t,body:s})=>(0,D.jsxs)(Qe,{direction:"column",gap:"spacing-xs",children:[(0,D.jsxs)(d.Z,{direction:"row",gap:"spacing-xs",alignItems:"center",children:[(0,D.jsx)(Xe,{alignItems:"center",justifyContent:"center",children:e}),t]}),(0,D.jsx)(Ye,{children:s})]}),tt=e=>{const{prefix:t,postfix:s,linkText:n,onLinkClick:i}=e;return(0,D.jsxs)("div",{children:[(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:t}),n&&(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:(0,D.jsx)("span",{onClick:i,children:(0,D.jsx)(p.ZP,{type:"link-default",color:"content-color-secondary",children:n})})}),s&&(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:s})]})},st=({children:e,defaultOpenAccordions:t,multiple:s})=>{const[r,o]=(0,n.useState)(t),a=e=>{s?r.includes(e)?o(r.filter((t=>t!==e))):o([...r,e]):r.includes(e)?o([]):o([e])};return(0,D.jsx)("div",{className:"accordion",children:i().Children.map(e,((e,t)=>i().cloneElement(e,{isOpen:r.includes(t),itemKey:t,onAccordionClick:a})))})},nt=[0,1,2],it=o().div.withConfig({displayName:"headers__StyledHeaders",componentId:"sc-j71dp7-0"})([".accordion{border-top:none;.accordion-item{margin-top:var(--spacing-zero);padding-bottom:var(--spacing-l);.title{display:flex;height:var(--line-height-m);h4{color:var(--content-color-secondary);font-size:var(--text-size-m);}i{margin-right:var(--spacing-xs);}}.panel{overflow:visible;padding-top:var(--spacing-xs);padding-bottom:var(--spacing-zero);overflow-wrap:break-word;}}}padding-bottom:var( --spacing-xxl );"]),rt=o().div.withConfig({displayName:"headers__HeadersContent",componentId:"sc-j71dp7-1"})(["font-size:var(--text-size-s);color:var(--content-color-primary);line-height:var(--line-height-s);font-family:var(--text-family-code);margin-left:20px;cursor:text;user-select:text;"]),ot=o()(d.Z).withConfig({displayName:"headers__EmptyStateContainer",componentId:"sc-j71dp7-2"})(["padding-top:var(--spacing-s);"]),at=e=>e&&Object.keys(e).reduce(((t,s)=>("string"==typeof e[s]&&(t[s]=e[s]),t)),{})&&(0,D.jsx)(rt,{children:Object.entries(e).map((([e,t])=>(0,D.jsxs)("div",{children:[(0,D.jsx)(p.ZP,{typographyStyle:{fontFamily:"text-family-code"},children:e}),":"," ",(0,D.jsx)(p.ZP,{typographyStyle:{fontFamily:"text-family-code"},color:"content-color-info",children:t})]},e)))}),lt=e=>{if(e.url){var t;const s=null!=(t=e.response)&&t.code?{"Status Code":`${e.response.code} ${e.response.status}`}:{};return at((0,qe.Z)({URL:e.url,Method:e.method},s))}return(0,D.jsx)(rt,{children:(0,D.jsxs)(d.Z,{alignItems:"center",direction:"row",gap:"spacing-xs",children:[(0,D.jsx)(ue.Z,{color:"content-color-error"}),(0,D.jsx)(p.ZP,{type:"body-small",isTruncated:!0,color:"content-color-error",children:f.Kb[f.Ky]})]})})},dt=(e,t)=>{const s=e.headers;let n=(0,D.jsx)(rt,{children:(0,D.jsx)(d.Z,{direction:"column",gap:"spacing-m",children:(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:f.Kb[f.C1]})})});if(!s&&e.error){const s=f.WD[e.error.type];let r,o;var i;s&&Array.isArray(s)?[r,o]=s:r=null!=(i=f.nC[e.error.type])?i:f.nC[f.vu],n=(0,D.jsx)(rt,{children:(0,D.jsx)(d.Z,{direction:"column",gap:"spacing-m",children:(0,D.jsx)(tt,{prefix:r,linkText:o,onLinkClick:t})})})}else if(s){const e={};for(const t of s)e[t.key]=t.value;n=at(e)}return n},ct=(e,t)=>{var s,n,i;const r=null==(s=e.response)?void 0:s.headers;let o=(0,D.jsx)(rt,{children:(0,D.jsx)(d.Z,{direction:"column",gap:"spacing-m",children:(0,D.jsx)(p.ZP,{type:"body-medium",color:"content-color-secondary",children:f.Kb[f.Rj]})})});if(e.error){const s=[f._k,f.Zq,f.wA].includes(e.error.type);return(0,D.jsx)(rt,{children:(0,D.jsx)(d.Z,{direction:"column",gap:"spacing-m",children:(0,D.jsx)(tt,{prefix:f.Kb[f.Kx].prefix,linkText:s?f.Kb[f.Kx].linkText:null,onLinkClick:t})})})}if(!r&&null!=(n=e.response)&&n.___ignored___)return(0,D.jsx)(rt,{children:(0,D.jsx)(tt,{prefix:f.nC[f.Rj],linkText:""})});if(r&&(null==(i=e.response)||!i.___ignored___)){const e={};for(const t of r)e[t.key]=t.value;o=at(e)}return o},ut=o()(d.Z).withConfig({displayName:"headers__StyledAccordionTitle",componentId:"sc-j71dp7-3"})(["cursor:pointer;"]),pt=({title:e,isOpen:t})=>(0,D.jsxs)(ut,{justifyContent:"space-between",alignItems:"center",children:[t?(0,D.jsx)(We.Z,{}):(0,D.jsx)(Ue.Z,{}),(0,D.jsx)(d.Z,{alignItems:"center",children:(0,D.jsx)(l.Z,{text:e,type:"h4"})})]}),ht=({item:e,isPastExecution:t,openConsoleTab:s})=>{var n;const i=(null==(n=e.response)?void 0:n.___ignored___)===f.dF,r=[],o=[];let a=null;return t?(r.push((0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"General"}),children:lt(e)})),o.push(0),a=(0,D.jsx)(ot,{children:(0,D.jsx)(et,{icon:(0,D.jsx)(ue.Z,{}),heading:(0,D.jsx)(l.Z,{text:f.Kb.HEADINGS.reqAndResHeadersUnavailable,type:"h5",color:"content-color-secondary"}),body:(0,D.jsx)(tt,{prefix:f.Kb[f.zE].prefix,linkText:f.Kb[f.zE].linkText,postfix:f.Kb[f.zE].postfix,onLinkClick:()=>{}})})})):i?(r.push((0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"General"}),children:lt(e)}),(0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"Request Headers"}),children:dt(e,s)})),o.push(0,1),a=(0,D.jsx)(ot,{children:(0,D.jsx)(et,{icon:(0,D.jsx)(ue.Z,{}),heading:(0,D.jsx)(l.Z,{text:f.Kb.HEADINGS.responseHeadersUnavailable,type:"h5",color:"content-color-secondary"}),body:(0,D.jsx)(tt,{prefix:f.Kb[f.qX].prefix,linkText:f.Kb[f.qX].linkText,postfix:f.Kb[f.qX].postfix,onLinkClick:()=>{}})})})):(r.push((0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"General"}),children:lt(e)}),(0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"Request Headers"}),children:dt(e,s)}),(0,D.jsx)(Je,{renderTitle:e=>(0,D.jsx)(pt,{isOpen:e,title:"Response Headers"}),children:ct(e,s)})),o.push(...nt)),(0,D.jsxs)(it,{children:[r.length>0&&(0,D.jsx)(st,{multiple:!0,defaultOpenAccordions:o,children:r}),a]})};var mt=s(49437),xt=s(2358),gt=s(91332),vt=s(1590);const yt=(0,n.lazy)((0,vt.loadRemoteModule)("code-editor/CodeEditor")),ft=i().forwardRef(((e,t)=>(0,D.jsx)(n.Suspense,{fallback:(0,D.jsx)($.Z,{}),children:(0,D.jsx)(yt,(0,qe.Z)({},e,{ref:t}))}))),_t=o().div.withConfig({displayName:"request-body__RequestBodyContent",componentId:"sc-1pk4hah-0"})(["font-size:var(--text-size-m);color:var(--content-color-primary);line-height:var(--line-height-m);height:inherit;"]),bt=o()(d.Z).withConfig({displayName:"request-body__EmptyStateContainer",componentId:"sc-1pk4hah-1"})(["padding-top:var(--spacing-s);"]),jt=o().div.withConfig({displayName:"request-body__RequestBodyContentGroup",componentId:"sc-1pk4hah-2"})(["height:inherit;.text-editor-dropdown-button__label{background:transparent;}"]),Ct=({item:e,openConsoleTab:t})=>{var s;const[r,o]=(0,n.useState)(!0),a=i().useCallback((()=>{o((e=>!e))}),[]),d=null==(s=e.body)?void 0:s.___ignored___;let c=(0,D.jsx)(mt.Z,{description:f.Kb[f.Wq],children:(0,D.jsx)(xt.Z,{})});if(d)c=d===f.Wq?(0,D.jsx)(bt,{children:(0,D.jsx)(et,{icon:(0,D.jsx)(ue.Z,{}),heading:(0,D.jsx)(l.Z,{text:f.Kb.HEADINGS.requestBodyUnavailable,type:"h5",color:"content-color-secondary"}),body:(0,D.jsx)(tt,{prefix:f.Kb[f.zE].prefix,linkText:f.Kb[f.zE].linkText,postfix:f.Kb[f.zE].postfix,onLinkClick:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"open_run_configuration",label:"past_session",entityType:"request",entityId:e.id})}})})}):(0,D.jsx)(tt,{prefix:f.nC[d]||f.nC[f.Wq],linkText:""});else if(!e.body&&e.error){const s=f.WD[e.error.type];let n,i;var u;s&&Array.isArray(s)?[n,i]=s:n=null!=(u=f.nC[e.error.type])?u:f.nC[f.vu],c=(0,D.jsx)(mt.Z,{description:(0,D.jsx)(tt,{prefix:n,linkText:i,onLinkClick:t}),children:(0,D.jsx)(gt.Z,{})})}else e.body&&(c=(0,D.jsx)(jt,{children:(0,D.jsx)(ft,{showActionBar:!0,enableLinks:!0,autoFormat:!0,readOnly:!0,tabsType:"dropdown",value:"string"==typeof e.body?e.body:JSON.stringify(e.body),language:"postman_json",wordWrap:r,onWordWrapClick:a,onCopy:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"copy_request_body",entityType:"request",entityId:e.id,label:""})},onFindWidgetOpen:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"search_request_body",entityType:"request",entityId:e.id,label:""})}})}));return(0,D.jsx)(_t,{children:c})};var It=s(81397),wt=s(56147),kt=s(84858),St=s(14257);const Tt=o().div.withConfig({displayName:"response-body__ResponseBodyContent",componentId:"sc-14mifq0-0"})(["font-size:var(--text-size-m);color:var(--content-color-primary);line-height:var(--line-height-m);height:inherit;"]),Et=o()(d.Z).withConfig({displayName:"response-body__ResponseBodyContentGroup",componentId:"sc-14mifq0-1"})(["height:inherit;.runner-results__response__badge{background:transparent;}.text-editor-dropdown-button__label{background:transparent;}"]),Zt=o()(d.Z).withConfig({displayName:"response-body__MediaIcon",componentId:"sc-14mifq0-2"})(["background-color:var(--background-color-secondary);"]),Rt=o()(d.Z).withConfig({displayName:"response-body__EmptyStateContainer",componentId:"sc-14mifq0-3"})(["padding-top:var(--spacing-s);max-width:fill-available;"]),At=e=>{var t;const[s,n]=i().useState(!0),r=i().useCallback((()=>{n((e=>!e))}),[]);let o;switch(null==(t=e.responseMetadata)?void 0:t.responseMimeType){case f.RM:case f.m3:var a;o=(0,D.jsxs)(d.Z,{gap:"spacing-xs",height:"fit-content",children:[(0,D.jsx)(It.Z,{content:"Preview not supported",placement:"bottom-start",children:(0,D.jsx)(Zt,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",gap:"spacing-xs",children:(0,D.jsx)(wt.Z,{})})}),(0,D.jsxs)(d.Z,{alignItems:"center",children:[null==(a=e.responseMetadata)||null==(a=a.responseFileExtension)?void 0:a.toUpperCase()," File"]})]});break;case f.ob:var l;o=(0,D.jsxs)(d.Z,{gap:"spacing-xs",height:"fit-content",children:[(0,D.jsx)(It.Z,{content:"Preview not supported",placement:"bottom-start",children:(0,D.jsx)(Zt,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",gap:"spacing-xs",children:(0,D.jsx)(kt.Z,{})})}),(0,D.jsxs)(d.Z,{alignItems:"center",children:[null==(l=e.responseMetadata)||null==(l=l.responseFileExtension)?void 0:l.toUpperCase()," File"]})]});break;case f.NF:var c;o=(0,D.jsxs)(d.Z,{gap:"spacing-xs",height:"fit-content",children:[(0,D.jsx)(It.Z,{content:"Preview not supported",placement:"bottom-start",children:(0,D.jsx)(Zt,{alignItems:"center",justifyContent:"center",width:"48px",height:"48px",gap:"spacing-xs",children:(0,D.jsx)(St.Z,{})})}),(0,D.jsxs)(d.Z,{alignItems:"center",children:[null==(c=e.responseMetadata)||null==(c=c.responseFileExtension)?void 0:c.toUpperCase()," File"]})]});break;default:var u;o=(0,D.jsx)(ft,{showActionBar:!0,enableLinks:!0,autoFormat:!0,autoResize:e.autoResize,readOnly:!0,tabsType:"dropdown",value:e.responseBody,language:null==(u=e.responseMetadata)?void 0:u.responseMimeFormat,wordWrap:s,onWordWrapClick:r,onCopy:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"copy_response_body",entityType:"request",entityId:e.requestId,label:""})},onFindWidgetOpen:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"search_response_body",entityType:"request",entityId:e.requestId,label:""})}})}return o},Nt=({item:e,openConsoleTab:t})=>{var s,n,i;const r=null==(s=e.response)?void 0:s.___ignored___;let o=(0,D.jsx)(mt.Z,{description:f.Kb[f.Nm],children:(0,D.jsx)(xt.Z,{})});if(r)o=r===f.dF?(0,D.jsx)(Rt,{children:(0,D.jsx)(et,{icon:(0,D.jsx)(ue.Z,{}),heading:(0,D.jsx)(l.Z,{text:f.Kb.HEADINGS.responseBodyUnavailable,type:"h5",color:"content-color-secondary"}),body:(0,D.jsx)(tt,{prefix:f.Kb[f.dF].prefix,linkText:f.Kb[f.dF].linkText,postfix:f.Kb[f.dF].postfix,onLinkClick:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"open_run_configuration",label:"current_session",entityType:"request",entityId:e.id})}})})}):r===f.Nm?(0,D.jsx)(Rt,{children:(0,D.jsx)(et,{icon:(0,D.jsx)(ue.Z,{}),heading:(0,D.jsx)(l.Z,{text:f.Kb.HEADINGS.responseBodyUnavailable,type:"h5",color:"content-color-secondary"}),body:(0,D.jsx)(tt,{prefix:f.Kb[f.zE].prefix,linkText:f.Kb[f.zE].linkText,postfix:f.Kb[f.zE].postfix,onLinkClick:()=>{S.AnalyticsService.addEventV2({category:"collectionrun",action:"open_run_configuration",label:"past_session",entityType:"request",entityId:e.id})}})})}):(0,D.jsx)(tt,{prefix:f.nC[r]||f.nC[f.Nm],linkText:""});else if(null!=(n=e.response)&&n.body||!e.error){if(null!=(i=e.response)&&i.body){var a,c,u,p;o=(0,D.jsx)(Et,{direction:"column",gap:"spacing-l",children:(0,D.jsx)(d.Z,{grow:1,children:(0,D.jsx)(At,{responseBody:e.response.body,responseMetadata:{responseCode:e.response.code,responseStatus:e.response.status,responseTime:e.response.responseTime,responseSize:null==(a=e.response.size)?void 0:a.total,responseMimeFormat:null==(c=e.response.contentInfo)?void 0:c.mimeFormat,responseMimeType:null==(u=e.response.contentInfo)?void 0:u.mimeType,responseFileExtension:null==(p=e.response.contentInfo)?void 0:p.fileExtension},requestId:e.id})})})}}else{const s=[f._k,f.Zq,f.wA].includes(e.error.type);o=(0,D.jsx)(mt.Z,{description:(0,D.jsx)(tt,{prefix:f.Kb[f.Kx].prefix,linkText:s?f.Kb[f.Kx].linkText:null,onLinkClick:t}),children:(0,D.jsx)(gt.Z,{})})}return(0,D.jsx)(Tt,{children:o})},qt=o()(d.Z).withConfig({displayName:"request-details__StyledContent",componentId:"sc-10d6k1m-0"})(["width:100%;padding:var(--spacing-zero) var(--spacing-l);height:100%;flex-direction:column;gap:var(--spacing-m);"]),Pt=o().div.withConfig({displayName:"request-details__StyledBreadcrumbContainer",componentId:"sc-10d6k1m-1"})(["width:100%;.interim-breadcrumb{ul{li a{span{color:",";font-weight:",";}}li:hover{a{background-color:transparent;cursor:default;span{color:",";}}}}}.final-breadcrumb{li:last-child{a:hover{cursor:pointer;background-color:",";}}}overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],(e=>e.theme["content-color-tertiary"]),(e=>e.theme["text-weight-regular"]),(e=>e.theme["content-color-tertiary"]),(e=>e.theme["highlight-background-color-primary"])),Dt=o()(d.Z).withConfig({displayName:"request-details__RequestName",componentId:"sc-10d6k1m-2"})(["width:inherit;max-width:calc(100% - var(--spacing-xl));gap:var(--spacing-s);height:var(--size-s);.interim-bread-crumb:hover li > a{color:var(--content-color-tertiary);text-decoration:none;cursor:default;}"]),Ot=o().div.withConfig({displayName:"request-details__ButtonContainer",componentId:"sc-10d6k1m-3"})(["width:var(--spacing-xl);right:var(--spacing-s);top:var(--spacing-s);padding:var(--spacing-zero) 2px;flex-shrink:0;"]),zt=o()(d.Z).withConfig({displayName:"request-details__StyledResponseBadgesContainer",componentId:"sc-10d6k1m-4"})(["height:var(--size-s);align-items:center;right:var(--spacing-xs);position:absolute;"]),Ht=o()(d.Z).withConfig({displayName:"request-details__StyledTabsContainer",componentId:"sc-10d6k1m-5"})(["position:relative;flex:auto;overflow:auto;"]),Lt=o()(Y.Z).withConfig({displayName:"request-details__StyledTabs",componentId:"sc-10d6k1m-6"})(["padding:initial;display:flex;flex-flow:column;overflow:auto;flex:auto;.tab-panels{overflow:auto;flex:auto;.tab-panel{height:calc(100% - 1px);}}.tab-list{height:var(--spacing-xl);.tab{height:var(--spacing-xl);}}"]),Ft=({item:e,isPastExecution:t,setSelectedItemIndex:s,openConsoleTab:r})=>{var o,l,u,p;const h=(()=>{const e=i().useContext(a._);return t=>{var s,n,i;const r=t.id,o=null==(s=e.collection)||null==(s=s.requests)?void 0:s.find((e=>e.id.includes(r)));let a=(0,q.getBreadcrumbItems)(e.activeWorkspaceId,{id:null==(n=e.collection)?void 0:n.id,name:null==(i=e.collection)?void 0:i.name}),l=[];if(o.parents)l=o.parents;else{const t=[];let s=o.folder||null;for(;s;){var d;const n=null==(d=e.collection)||null==(d=d.folders)?void 0:d.find((e=>e.id===s));n?(t.push({id:null==n?void 0:n.id,name:null==n?void 0:n.name}),s=null==n?void 0:n.folder):s=null}l=t.reverse()}for(const t of l)a=[...a,...(0,q.getBreadcrumbItems)(e.activeWorkspaceId,void 0,{id:t.id,name:t.name})];return[...a,...(0,q.getBreadcrumbItems)(e.activeWorkspaceId,void 0,void 0,{id:o.id,name:o.name})]}})(),m=(0,b.tl)(),x=(0,b.UT)(),g=(0,b.Ze)(),[v,y]=(0,n.useState)(0);if(!e)return null;const _=h(e);return(0,D.jsxs)(qt,{children:[(0,D.jsxs)(d.Z,{justifyContent:"space-between",width:"100%",children:[(0,D.jsxs)(Dt,{children:[(0,D.jsx)(pe.C,{method:e.method,size:"medium"}),(0,D.jsx)(Pt,{children:(0,D.jsx)(Ke.aG,{className:"final-breadcrumb",onItemClick:e=>{switch(e.entityType){case"request":m(e.id);break;case"collection":x(e.id);break;case"folder":g(e.id)}},children:_.map((e=>(0,D.jsx)(Me.Z,{itemData:e,children:e.name},e.id)))})})]}),(0,D.jsx)(Ot,{children:(0,D.jsx)(c.Z,{onClick:()=>{s(null)},type:"tertiary",size:"small",icon:(0,D.jsx)($e.Z,{})})})]}),"running"===e.status?(0,D.jsx)($.Z,{description:f.nC[f.M8]}):(0,D.jsxs)(Ht,{direction:"column",children:[(0,D.jsx)(zt,{children:(0,D.jsx)(me,{code:null==(o=e.response)?void 0:o.code,status:null==(l=e.response)?void 0:l.status,time:null==(u=e.response)?void 0:u.responseTime,size:null==(p=e.response)||null==(p=p.size)?void 0:p.total})}),(0,D.jsxs)(Lt,{incrementallyCreateTabs:!0,activeTabIndex:v,onChange:e=>{y(e)},type:"secondary",children:[(0,D.jsxs)(ee.Z,{className:"tab-list",children:[(0,D.jsx)(te.Z,{label:"Response",className:"tab"}),(0,D.jsx)(te.Z,{label:"Headers",className:"tab"}),(0,D.jsx)(te.Z,{label:"Request",className:"tab"})]}),(0,D.jsxs)(Ge.Z,{className:"tab-panels",children:[(0,D.jsx)(Ve.Z,{className:"tab-panel",children:(0,D.jsx)(Nt,{item:e,openConsoleTab:r})}),(0,D.jsx)(Ve.Z,{className:"tab-panel",children:(0,D.jsx)(ht,{item:e,isPastExecution:t,openConsoleTab:r})}),(0,D.jsx)(Ve.Z,{className:"tab-panel",children:(0,D.jsx)(Ct,{item:e,isPastExecution:t,openConsoleTab:r})})]})]})]})]})};var Bt=s(19578),Kt=s(95780);const Mt=o().div.withConfig({displayName:"run-results-content__Container",componentId:"sc-w4xnos-0"})(["height:100%;padding-top:var(--spacing-s);.execution-item-list{display:flex;height:100px;}"]),Gt=o().div.withConfig({displayName:"run-results-content__StyledPaneContainer",componentId:"sc-w4xnos-1"})(["flex:1;display:flex;width:100%;"]),Vt=o().div.withConfig({displayName:"run-results-content__ResultsBody",componentId:"sc-w4xnos-2"})(["display:flex;flex-direction:column;padding-top:var(--spacing-s);flex:1;overflow-y:hidden;"]),$t=(0,n.memo)((e=>{const{index:t,data:s,style:n}=e,{items:i,iterationIndexes:r,selectedItemIndex:o,setSelectedItemIndex:a}=s,l=r.indexOf(t),d=-1!==l;return(0,D.jsx)("div",{style:n,children:(0,D.jsx)(Ne,{item:i[t],showIteration:d,iterationIndex:l,index:t,selectedItemIndex:o,setSelectedItemIndex:a,openConsoleTab:()=>Kt.pmConsole.reveal()})})})),Wt=(0,y.observer)((({activeIndex:e})=>{const t=i().useContext(a._),s=f.v6[e],r=Pe()(s),o=t.iterationIndexes,[l,c]=(0,n.useState)(null),[u,p]=(0,n.useState)(0),[h,m]=(0,n.useState)(0),x=i().useRef(null),g=i().useRef(!1),v=i().useRef(null);(0,n.useEffect)((()=>{g.current&&x.current&&x.current.scrollToItem(r.length)}),[r,g]),(0,n.useEffect)((()=>{var e;0===r.length?(null==v||null==(e=v.current)||e.collapse("x"),c(null)):l>=r.length&&c(0)}),[e,r,l]);const y=(0,n.useCallback)((({scrollDirection:e})=>{"backward"===e&&(g.current=!1)}),[]),_=e=>{var t,s;c(e),null===e?null==v||null==(t=v.current)||t.collapse("x"):null==v||null==(s=v.current)||s.unCollapse("x")},b=e=>{const t=r[e].assertions.length,s=o.includes(e)?f.$W:0;return t?28*t+71+s:99+s};return(0,D.jsxs)(Bt.PaneGroup,{defaultLayout:"horizontal",children:[(0,D.jsx)(Bt.Pane,{width:{shouldResistResize:!1,uncollapsed:f.CV.LEFT_PANE.default,default:f.CV.LEFT_PANE.default,min:f.CV.LEFT_PANE.min},children:(0,D.jsxs)(Gt,{children:[(0,D.jsx)(Vt,{"data-testid":"run-results-container",children:r.length>0?(0,D.jsx)(le(),{children:({height:e,width:s})=>(0,D.jsx)(Mt,{children:(0,D.jsx)(oe.VariableSizeList,{className:"execution-item-list",height:e,width:s,ref:x,itemCount:r.length,itemSize:b,onScroll:y,itemData:{items:r,iterationIndexes:o,selectedItemIndex:l,setSelectedItemIndex:_},onItemsRendered:({visibleStartIndex:e,visibleStopIndex:t})=>{t>=r.length-2&&(g.current=!0),p(r[e].iteration),m(r[t].iteration)},children:$t},t.totalTestCount)})},s):(()=>{let e,t;switch(s){case"all-tests":return null;case"passed-tests":e="No passed tests",t="This run did not result in any passed test";break;case"failed-tests":e="No failed tests",t="This run did not result in any failed test";break;case"skipped-tests":e="No skipped tests",t="This run did not result in any skipped test";break;default:e="",t=""}return(0,D.jsx)(De,{illustration:"passed-tests"===s?(0,D.jsx)(de.Z,{}):(0,D.jsx)(ce.Z,{}),title:e,message:t})})()}),(0,D.jsx)(Be,{iterationCount:t.iterationCount,currentIteration:t.currentIteration,runStatus:t.runStatus,visibleStartIndex:u,visibleStopIndex:h,scrollToIteration:e=>{x.current&&x.current.scrollToItem(o[e])}})]})}),(0,D.jsx)(Bt.Pane,{ref:v,width:{shouldResistResize:!1,uncollapsed:f.CV.RIGHT_PANE.default,min:f.CV.RIGHT_PANE.min,collapsed:f.CV.RIGHT_PANE.collapsed,default:f.CV.RIGHT_PANE.default,collapsedByDefault:!0},children:(0,D.jsx)(d.Z,{height:"100%",children:(0,D.jsx)(Ft,{item:null===l?r[0]:r[l],setSelectedItemIndex:_,saveResponse:t.saveResponse,isPastExecution:t.isPastExecution,openConsoleTab:()=>Kt.pmConsole.reveal()})})})]})})),Ut=(0,y.observer)((({setViewSummary:e})=>{const[t,s]=(0,n.useState)(0);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(re,{activeIndex:t,setActiveIndex:s,setViewSummary:e}),(0,D.jsx)(Wt,{activeIndex:t})]})}));var Jt=s(39245),Xt=s(25451);const Qt=(e,t)=>ze()({"runner-summary__header-iteration__tab":!0,"is-hovered":t===e}),Yt=({onIterationHover:e,hoveredIteration:t,scrollLeft:s,onScroll:r})=>{const o=i().useContext(a._).iterationCount,l=i().useRef(null);return(0,n.useEffect)((()=>{l.current&&(l.current.scrollLeft=s)}),[s]),(0,D.jsxs)("div",{className:"runner-summary__header-iterations",children:[(0,D.jsx)("div",{className:"runner-summary__meta--placeholder"}),(0,D.jsx)("div",{ref:l,onScroll:r,className:"runner-summary__header-iteration__tabs",children:Array.from({length:o||0},((e,t)=>t)).map((s=>(0,D.jsx)("div",{className:Qt(s,t),onMouseEnter:()=>e(s),"data-testid":"run-summary-header-iteration-tab",children:(0,D.jsx)("div",{className:"runner-summary__header-iteration__tab__count",children:s+1})},s)))})]})},es=({active:e,type:t,hoveredIteration:s,onHover:n,state:i,iteration:r})=>{const o="test"===t?((e,t,s)=>ze()({"runner-summary__body__timeline__keyframe":!0,"is-grey":0===e,"is-green":1===e,"is-red":2===e,"is-hovered":s===t}))(i,r,s):((e,t,s,n)=>ze()({"runner-summary__body__timeline__keyframe":!0,"is-grey":t&&0===e,"is-green":t&&1===e,"is-red":t&&2===e,"is-hovered":n===s}))(i,e,r,s),a=o.includes("is-red"),l=s===r;return(0,D.jsx)("div",{className:"runner-summary__body__timeline__keyframe-wrapper",onMouseOver:n.bind(void 0,r),children:(0,D.jsx)("div",{className:o,children:a&&l&&(0,D.jsx)($e.Z,{"data-testid":"run-summary-timeline-keyframe-failed-icon",color:"grey-00"})})})},ts=i().forwardRef((({active:e,hoveredIteration:t,iterations:s,type:i,states:r,onHover:o,scrollLeft:a,onScroll:l},d)=>((0,n.useEffect)((()=>{const e=null==d?void 0:d.current;e&&(e.scrollLeft=a)}),[a]),(0,D.jsx)("div",{className:"runner-summary__body__timeline",children:(0,D.jsx)("div",{className:"pm-row",ref:d,onScroll:l,children:((s,n)=>{const r=[];for(let a=0;a<s;a++)r.push((0,D.jsx)(es,{active:e,type:i,hoveredIteration:t,state:n[a]||0,iteration:a,onHover:o},a));return r})(s,r)})})))),ss=({iterations:e,hoveredIteration:t,test:s,onIterationHover:r,scrollLeft:o,onScroll:a})=>{const l=i().useRef(null),d={[f.sk.SKIPPED]:"Skip",[f.sk.PASSED]:"Pass",[f.sk.FAILED]:"Fail"};return(0,n.useEffect)((()=>{const e=l.current;e&&(e.scrollLeft=o)}),[o]),s?(0,D.jsxs)("div",{className:(c=s.status,ze()({"runner-summary__test-list-item":!0,"is-skipped":c===f.sk.SKIPPED,"is-passed":c===f.sk.PASSED,"is-failed":c===f.sk.FAILED})),children:[(0,D.jsxs)("div",{className:"runner-summary__test-list-item__meta",children:[(0,D.jsx)("div",{className:"runner-summary__test-list-item__status__text",children:d[s.status]}),(0,D.jsx)("div",{className:"runner-summary__test-list-item__name","data-testid":"run-summary-test-name",children:s.name})]}),(0,D.jsx)("div",{ref:l,className:"runner-summary__test-list-item__timeline",onScroll:a,children:(0,D.jsx)(ts,{active:!1,iterations:e,hoveredIteration:t,states:s.iter,scrollLeft:o,type:"test",onHover:r,onScroll:a})})]}):null;var c},ns=({passed:e,failed:t})=>(0,D.jsxs)("div",{className:"runner-summary__request-list-item__test-count",children:[0===e?(0,D.jsx)(p.ZP,{className:"text-status-small",children:"0 "}):(0,D.jsxs)(p.ZP,{className:"text-status-small test-count--passed",children:[e.toString()," "]}),(0,D.jsx)(p.ZP,{className:"text-status-small",children:"| "}),0===t?(0,D.jsx)(p.ZP,{className:"text-status-small",children:"0 "}):(0,D.jsxs)(p.ZP,{className:"text-status-small test-count--failed",children:[t.toString()," "]})]}),is=(e="get")=>ze()("runner-summary__request-list-item__method",`runner-summary__request-list-item__method--${e.toUpperCase()}`),rs=o().div.withConfig({displayName:"run-summary-list-item__StyledIconContainer",componentId:"sc-1135o4d-0"})(["display:flex;align-items:center;"]),os=({row:e,hoveredIteration:t,onIterationHover:s,iterations:r,scrollLeft:o,onScroll:a})=>{const[l,d]=(0,n.useState)(!1),c=e.tests&&e.tests.length>0,u=l?We.Z:Ue.Z,h=(0,b.tl)(),m=i().useRef(null);return(0,n.useEffect)((()=>{const e=m.current;e&&(e.scrollLeft=o)}),[o]),(0,D.jsxs)("div",{className:"runner-summary__request-list-item",children:[(0,D.jsxs)("div",{className:"runner-summary__request-list-item__header",children:[(0,D.jsxs)("div",{className:"runner-summary__request-list-item__meta",children:[c?(0,D.jsx)(rs,{"data-testid":"run-summary-expand-tests-icon-container",onClick:()=>d(!l),children:(0,D.jsx)(u,{className:"runner-summary__request-list-item__expand"})}):(0,D.jsx)("div",{className:"runner-summary__request-list-item__expand--placeholder"}),(0,D.jsx)("div",{className:is(e.method),onClick:()=>d(!l),children:e.method.toUpperCase()}),(0,D.jsx)("div",{className:"runner-summary__request-list-item__name","data-testid":"runner-summary__request-list-item__name",onClick:t=>{t.stopPropagation(),h(e.id)},children:(0,D.jsx)(p.ZP,{type:"link-subtle",isTruncated:!0,children:e.name})}),(0,D.jsx)(ns,{passed:e.passed,failed:e.failed})]}),(0,D.jsx)("div",{ref:m,className:"runner-summary__request-list-item__timeline",onScroll:a,children:(0,D.jsx)(ts,{active:!0,hoveredIteration:t,iterations:r,states:e.tmap,scrollLeft:o,type:"request",onHover:s,onScroll:a})})]}),(0,D.jsx)("div",{className:"runner-summary__request-list-item__body",children:l&&e.tests.map(((e,n)=>(0,D.jsx)(ss,{iterations:r,hoveredIteration:t,scrollLeft:o,test:e,onIterationHover:s,onScroll:a},n)))})]})},as=(0,y.observer)((({hoveredIteration:e,onIterationHover:t,scrollLeft:s,onScroll:n})=>{const r=i().useContext(a._),o=Pe()(f.v6[0]).map((e=>({id:e.id,name:e.name,method:e.method,iteration:e.iteration,tests:e.assertions}))).reduce(((e,t)=>{const{id:s,iteration:n,method:i,name:r,tests:o}=t;e[s]||(e[s]={id:s,name:r,method:i,tests:[],tmap:[],failed:0,passed:0,status:0}),e[s].tmap[n]||(e[s].tmap[n]=0);for(const[t,i]of o.entries()){e[s].tests[t]||(e[s].tests[t]={name:i.name,iter:[]});let r=f.sk.FAILED;i.skipped?r=f.sk.SKIPPED:i.passed&&(r=f.sk.PASSED),e[s].tests[t].iter[n]=r,e[s].tests[t].status=(l=r,void 0===(a=e[s].tests[t].status)?l:l===f.sk.FAILED?f.sk.FAILED:l===f.sk.PASSED&&a!==f.sk.FAILED?f.sk.PASSED:a),i.passed||i.skipped?!i.skipped&&i.passed&&e[s].passed++:(e[s].failed++,e[s].tmap[n]=f.sk.FAILED,e[s].status=f.sk.FAILED)}var a,l;return o.length>0&&e[s].tmap[n]===f.sk.SKIPPED&&0!==e[s].passed&&(e[s].tmap[n]=f.sk.PASSED),o.length>0&&e[s].status===f.sk.SKIPPED&&(e[s].status=f.sk.PASSED),e}),{});return(0,D.jsxs)("div",{className:"runner-summary__body",children:[Object.keys(o).map((i=>(0,D.jsx)(os,{row:o[i],iterations:r.iterationCount,onIterationHover:t,hoveredIteration:e,scrollLeft:s,onScroll:n},i))),0===Object.keys(o).length&&(0,D.jsx)("div",{className:"runner-summary__body--empty",children:"No tests found for the run"})]})})),ls=(0,y.observer)((({setViewSummary:e})=>{const[t,s]=(0,n.useState)(0),[i,r]=(0,n.useState)(0),o=e=>{e&&r(e.target.scrollLeft)};return(0,D.jsxs)("div",{className:"runner-summary",children:[(0,D.jsx)("div",{className:"runner-summary__section-top",children:(0,D.jsxs)("div",{className:"runner-summary__section-top__header",children:[(0,D.jsx)("div",{className:"runner-summary__section-top__label",children:(0,D.jsx)(p.ZP,{type:"label-secondary-small",children:"RUN SUMMARY"})}),(0,D.jsx)(c.Z,{type:"monochrome-plain",size:"small",text:"View Results","data-testid":"view-results-button",onClick:()=>e(!1)})]})}),(0,D.jsxs)("div",{className:"runner-summary__section-bottom",children:[(0,D.jsx)(Yt,{onIterationHover:s,hoveredIteration:t,onScroll:o,scrollLeft:i}),(0,D.jsx)(as,{onIterationHover:s,hoveredIteration:t,scrollLeft:i,onScroll:o})]})]})})),ds=o().div.withConfig({displayName:"run-open-workbench-view__CollectionRunOpenContainer",componentId:"sc-1cjugif-0"})(["flex:1;display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden;"]),cs=(0,y.observer)((()=>{const e=i().useContext(a._),t=e.collection,s=e.createdBy,r=e.runCompleted,o=e.folderId||void 0,{setTabTitle:l}=(0,Jt.useTabTitleMeta)(),d=e.viewSummary,c=e.setViewSummary.bind(e),{planFeatures:u,isLoading:p,refetch:h}=(0,E.b)(),{isLoading:m,refetch:x}=(0,Z.w)(),{isLoading:g}=(0,R.A)((null==u?void 0:u.templatePath)||f.df);return(0,n.useEffect)((()=>{var t;l((null==(t=e.collection)?void 0:t.name)||"Loading...","collection-runner")}),[t]),(0,n.useEffect)((()=>{r&&(h(),x())}),[r]),e.isHydrating||p||m||g?(0,D.jsx)(Xt.T,{}):(0,D.jsxs)(ds,{children:[(0,D.jsx)(V,{collectionId:null==t?void 0:t.id,collectionName:null==t?void 0:t.name,folderId:o,timestamp:e.startedAt,runStatus:e.runStatus,createdBy:s}),(0,D.jsx)(Q,{runStatus:e.runStatus,source:e.source,activeEnvironment:e.activeEnvironment}),d?(0,D.jsx)(ls,{setViewSummary:c}):(0,D.jsx)(Ut,{setViewSummary:c})]})}))},72883:(e,t,s)=>{s.d(t,{_:()=>I,z:()=>w});var n=s(40540),i=s.n(n),r=s(60607),o=s(7560),a=s(60398),l=s(67490),d=s(78476),c=s(95780),u=s(84452),p=s(98276),h=s(53186),m=s(19832),x=s(97201),g=s(28949),v=s(29875),y=s(688),f=s(19578);class _{constructor(e,t,s){this.isHydrating=!1,this.isHydrated=!1,this.executionId=null,this.runStatus=l.RG.INITIALIZED,this.executionData=[],this.iterationIndexes=[0],this.showException=!0,this.activeWorkspaceId=null,this.envSessionId=null,this.globalsSessionId=null,this.collectionSessionId=null,this.collection=null,this.executionOptions=null,this.currentIteration=0,this.startedAt=null,this.createdAt=null,this.updatedAt=null,this.createdBy=null,this.source="runner",this.activeEnvironment=null,this.runItems=[],this.selectedRequests=[],this.runRequestOrder=[],this.folderId=null,this.encounteredError=!1,this.hasCustomRequestOrderOrSelection=!1,this.persist=!0,this.iterationMutations=[],this.isPastExecution=!1,this.iterationCount=null,this.saveResponse=!1,this.isAborting=!1,this.totalTestCount=0,this.failedTestCount=0,this.passedTestCount=0,this.skippedTestCount=0,this.totalDuration=0,this.iterations=[],this.unsubscribeFromCollectionCache=void 0,this.runCompleted=!1,this.refetchCollectionCache=null,this.storage=new v.KVStorage("collection-runner"),this.viewSummary=!1,this.getEventListeners=()=>({start:()=>{this.setRunStatus(l.RG.STARTED)},beforeItem:e=>{var t,s;const n=e.cursor.iteration;this.addExecutionItem(n,{id:e.item.id,name:e.item.name,method:null==(t=e.item.request)?void 0:t.method,url:null==(s=e.item.request)?void 0:s.url,ref:e.cursor.ref,status:l.sS,assertions:[],iteration:n})},request:e=>{const t=this.executionData.at(-1),s=e.error;if(s)return t.error={message:s.message,name:s.name,stack:s.stack,type:l._k},t.status=l._H,void(this.encounteredError=!0);t.url=e.request.url,t.headers=e.request.headers;const n=e.request.body;if(n){const e=null==n?void 0:n.mode,s=Array.isArray(n[e])?n[e].reduce(((e,t)=>(!t.disabled&&(e[t.key]=t.value),e)),{}):n[e];t.body=s}},response:e=>{const t=this.executionData.at(-1);t.status=l._H;const{response:s,error:n,request:i,cursor:r,history:o}=e;if(n)t.error={message:n.message,name:n.name,stack:n.stack,type:l._k},this.encounteredError=!0;else{const e={code:null==s?void 0:s.code,size:null==s?void 0:s.size,status:null==s?void 0:s.status,responseTime:null==s?void 0:s.responseTime,contentInfo:null==s?void 0:s.contentInfo};if(this.saveResponse){e.headers=null==s?void 0:s.headers;const t=null==s?void 0:s.stream;if(t)if("___dropped___"in t&&t.___dropped___||"___truncated___"in t&&t.___truncated___)e.___ignored___=l.hM;else{var a,d,u;const n=null!=(a=null==s||null==(d=s.contentInfo)?void 0:d.charset)?a:"utf8";e.contentInfo=null!=(u=null==s?void 0:s.contentInfo)?u:null,e.body=new TextDecoder(n).decode(t),e.headers=s.headers}}else e.___ignored___=l.dF;t.response=e,this.updateTotalDuration((null==s?void 0:s.responseTime)||0)}c.pmConsole.logRequest({request:i,response:s,error:n,cursor:r,history:o})},console:e=>{c.pmConsole.logConsole({level:e.level,messages:e.messages})},assertion:e=>{const t=this.executionData.at(-1);t.assertions=[...t.assertions,...e.assertions],this.updateAssertionCounts(e.assertions)},exception:()=>{this.showException&&(f.Toast.getToasts().addToast({description:"Something went wrong while running your scripts. Check Postman Console for more info.",status:"error"}),this.showException=!1,this.encounteredError=!0)},script:e=>{const{mutations:t,error:s,event:n}=e,i=this.executionData.at(-1);s&&(i.error={message:s.message,name:s.name,stack:s.stack,type:"prerequest"===(null==n?void 0:n.listen)?l.Zq:l.wA},i.status=l._H,this.encounteredError=!0,c.pmConsole.logException({error:s})),this.persist&&this.iterationMutations.push((0,o.Z)({},t,{requestId:i.id}))},pause:()=>{this.setRunStatus(l.RG.PAUSED)},done:e=>{e&&this.isAborting?this.setRunStatus(l.RG.ABORTED):[l.RG.STARTED,l.RG.PAUSED].includes(this.runStatus)&&(this.encounteredError?this.setRunStatus(l.RG.ERROR):this.setRunStatus(l.RG.FINISHED)),this.executionData.at(-1).status=l._H,this.setUpdatedAt((new Date).toISOString()),this.createCollectionRunRecord(),this.persist&&this.persistEnvMutations()}}),this.executionId=s.id,this.activeWorkspaceId=t,this.createdBy=e,(0,d.makeObservable)(this,{isHydrating:!0,setIsHydrating:d.action,executionData:!0,runStatus:!0,setRunStatus:d.action,addExecutionItem:d.action,currentIteration:!0,setCurrentIteration:d.action,totalTestCount:!0,failedTestCount:!0,passedTestCount:!0,skippedTestCount:!0,updateAssertionCounts:d.action,totalDuration:!0,updateTotalDuration:d.action,activeEnvironment:!0,setActiveEnvironment:d.action,iterationIndexes:!0,iterationCount:!0,saveResponse:!0,isPastExecution:!0,startedAt:!0,setStartedAt:d.action,createdAt:!0,setCreatedAt:!0,updatedAt:!0,setUpdatedAt:d.action,collection:!0,runCompleted:!0,setRunCompleted:d.action,folderId:!0,viewSummary:!0,setViewSummary:d.action}),this.hydrate(s)}async loadRunFromHistory(e){var t;this.setIsHydrating(!0),this.isPastExecution=!0;const{data:s}=await(0,m.fetchCollectionRunById)({runId:e});if(this.runStatus=s.status,this.iterationCount=(null==(t=s.iterations)?void 0:t.length)||1,this.runRequestOrder=s.requestOrderSelection?s.requestOrderSelection.selectedItems.map((e=>e.id)):this.runItems.map((e=>e.id)),s.iterations)for(let e=0;e<s.iterations.length;e++){const t=s.iterations[e];for(const s of t){var n;const t=(s.tests||[]).map((e=>(0,o.Z)({},e,{skipped:"skipped"===e.status,passed:"pass"===e.status})));this.addExecutionItem(e,{id:s.id,name:s.name,method:s.request.method,url:s.request.url,ref:s.ref,status:"finished",assertions:t,iteration:e,response:{___ignored___:l.Nm,code:s.response.code,status:s.response.name,size:{total:s.response.size,body:s.response.size,header:0},responseTime:s.response.time},body:{___ignored___:l.Wq},error:s.error?{name:"error"}:null}),this.updateTotalDuration((null==(n=s.response)?void 0:n.time)||0)}}this.persist=s.persist,this.activeEnvironment={id:s.environment},this.startedAt=s.startedAt,this.createdAt=s.createdAt,this.updatedAt=s.updatedAt,this.createdBy=`${s.owner}`,this.totalTestCount=s.totalTestCount,this.failedTestCount=s.failedTestCount,this.passedTestCount=s.passedTestCount,this.skippedTestCount=s.skippedTestCount,this.folderId=s.folder;const i=await this.storage.get("stopOnError");this.executionOptions={saveCookiesAfterRun:!0,stopOnError:i,iterationCount:this.iterationCount,delay:s.delay}}onCollectionCacheUpdate(e){this.collection=(0,y.rC)(e),this.runItems=(0,g.d0)(e)}setViewSummary(e){this.viewSummary=e,this.storage.set("viewSummary",e)}setActiveEnvironment(e){this.activeEnvironment=e}updateTotalDuration(e){this.totalDuration+=e}updateAssertionCounts(e){this.totalTestCount+=e.length,this.failedTestCount+=e.reduce(((e,t)=>t.passed||t.skipped?e:e+1),0),this.passedTestCount+=e.reduce(((e,t)=>t.passed&&!t.skipped?e+1:e),0),this.skippedTestCount+=e.reduce(((e,t)=>t.skipped?e+1:e),0)}setCurrentIteration(e){this.currentIteration=e}setIsHydrating(e){this.isHydrating=e}setIsHydrated(e){this.isHydrated=e}async hydrate(e){var t,s=this;this.setIsHydrating(!0),this.viewSummary=await this.storage.get("viewSummary")||!1;const n=e.additionalContext,i=n.payload.collectionId;this.folderId=null!=(t=n.payload.folderId)?t:"";const r=new x.MultiCacheObserver(x.cacheClient,[(0,h.collectionFindOneQuery)({collectionId:i,populate:!0})]);this.unsubscribeFromCollectionCache=r.subscribe((async function(t){var i;const r=t[0],o=null==(i=r.data)?void 0:i.data;if(s.refetchCollectionCache=r.refetch,o){if(s.onCollectionCacheUpdate(o),!s.isHydrated){if(e.loadFromHistory)await s.loadRunFromHistory(e.id);else{var a,l,d;n.agentOptions&&(s.executionOptions=n.agentOptions),s.iterationCount=(null==(a=n.agentOptions)?void 0:a.iterationCount)||1,s.saveResponse=(null==(l=n.runOptions)?void 0:l.saveResponse)||!1,s.hasCustomRequestOrderOrSelection=n.payload.hasCustomRequestOrderOrSelection||!1,s.runRequestOrder=n.payload.order||[],s.persist=null==(d=n.runOptions)?void 0:d.persist;for(let e=0;e<(s.iterationCount||1);e++)s.iterations.push([])}s.setIsHydrated(!0)}s.setIsHydrating(!1)}}))}updateCollectionSessionId(e){this.collectionSessionId=e}updateEnvSessionId(e){this.envSessionId=e}updateGlobalsSessionId(e){this.globalsSessionId=e}setStartedAt(e){this.startedAt=e}setCreatedAt(e){this.createdAt=e}setRunCompleted(e){this.runCompleted=e}getAgentOptions(){var e,t,s,n,i,r;const o={invocationId:this.executionId,saveCookiesAfterRun:null==(e=this.executionOptions)?void 0:e.saveCookiesAfterRun,stopOnError:null==(t=this.executionOptions)?void 0:t.stopOnError,iterationCount:null==(s=this.executionOptions)?void 0:s.iterationCount,delay:null==(n=this.executionOptions)?void 0:n.delay,runWithEmptyCookieJar:null==(i=this.executionOptions)?void 0:i.runWithEmptyCookieJar,data:null==(r=this.executionOptions)?void 0:r.data};return this.runRequestOrder?o.entrypoint={execute:this.runRequestOrder,lookupStrategy:"followOrder"}:this.folderId&&(o.entrypoint={execute:this.folderId}),o}async startRun({activeEnvironment:e,options:t}){var s,n,i;this.setActiveEnvironment(e),this.setStartedAt(new Date(Date.now()).toISOString()),this.setActiveEnvironment(e);const r=await(async({activeEnvironment:e,workspaceId:t,collectionItem:s})=>{const[n,i,r]=await Promise.all([(0,p.getActiveGlobalsSession)(t),(0,p.getActiveEnvironmentSession)(null==e?void 0:e.id),(0,h.getActiveCollectionSession)(s)].map((e=>e&&e.catch((()=>{})))));return{globals:n,environment:i,collection:r}})({activeEnvironment:e,workspaceId:this.activeWorkspaceId,collectionItem:this.collection}).catch((()=>{}));this.updateCollectionSessionId(null==r||null==(s=r.collection)?void 0:s.id),this.updateEnvSessionId(null==r||null==(n=r.environment)?void 0:n.id),this.updateGlobalsSessionId(null==r||null==(i=r.globals)?void 0:i.id);const a=[];this.runRequestOrder=this.runRequestOrder.map((e=>{var t;return(0,h.composeUID)(e,null==(t=this.collection)?void 0:t.owner)}));for(const e of this.runRequestOrder){const t=this.runItems.find((t=>t.id===e));t&&a.push(t)}const l={collection:this.collection,variables:{environment:null==r?void 0:r.environment,globals:null==r?void 0:r.globals}};await(0,u.runCollectionViaAgent)(l,(0,o.Z)({isPackageResolverEnabled:(null==t?void 0:t.isPackageResolverEnabled)||!1},this.getAgentOptions(),this.getEventListeners()))}runAgain({activeEnvironment:e,options:t}){this.executionId=(0,a.v4)(),this.isPastExecution=!1,this.runStatus=l.RG.INITIALIZED,this.executionData=[],this.iterationIndexes=[0],this.currentIteration=0,this.totalTestCount=0,this.failedTestCount=0,this.passedTestCount=0,this.skippedTestCount=0,this.totalDuration=0,this.startedAt=null,this.updatedAt=null,this.showException=!0,this.source="runner",this.isAborting=!1,this.setRunCompleted(!1),this.startRun({activeEnvironment:e,options:t})}setRunStatus(e){this.runStatus=e}setUpdatedAt(e){this.updatedAt=e}persistEnvMutations(){for(const e of this.iterationMutations)null!=e&&e.collectionVariables&&this.collectionSessionId&&(e.collectionVariables.id=this.collectionSessionId),null!=e&&e.environment&&p.environmentVariablesHandler.add(e.environment,{workspaceId:this.activeWorkspaceId}),null!=e&&e.globals&&p.globalVariablesHandler.add(e.globals,{workspaceId:this.activeWorkspaceId}),null!=e&&e.collectionVariables&&h.collectionVariablesHandler.add(e.collectionVariables,{workspaceId:this.activeWorkspaceId,requestId:e.requestId})}addExecutionItem(e,t){e!==this.iterationIndexes.length-1&&(this.iterationIndexes.push(this.executionData.length),this.setCurrentIteration(e)),this.executionData=[...this.executionData,t]}createCollectionRunRecord(){var e,t,s,n;const i=[];if(this.setCreatedAt(new Date(Date.now()).toISOString()),null!==this.iterationCount){for(let e=0;e<this.iterationCount;e++)i.push([]);for(const e of this.executionData){var r,o,l,d,c;const t=e.iteration,s=this.runItems.find((t=>t.id===e.id));let n="";if(null!=s&&s.parents){for(const e of s.parents)n+=`/ ${e.name}`;n+=` / ${s.name}`}i[t].push({id:e.id,name:e.name,ref:e.ref,error:!!e.error,request:{method:e.method,url:e.url,path:n},response:{code:null==(r=e.response)?void 0:r.code,name:null==(o=e.response)?void 0:o.status,size:null==(l=e.response)||null==(l=l.size)?void 0:l.total,time:null==(d=e.response)?void 0:d.responseTime},tests:null==(c=e.assertions)?void 0:c.map((e=>{let t="fail";return e.passed?t="pass":e.skipped&&(t="skipped"),{name:e.name,status:t,error:e.error}}))})}}const u={id:(0,h.composeUID)((0,a.v4)(),this.createdBy),selectedItems:this.runRequestOrder.map((e=>({id:(0,h.composeUID)(e,this.createdBy),type:"request"})))},p=this.getAgentOptions(),x={failedTestCount:this.failedTestCount,passedTestCount:this.passedTestCount,skippedTestCount:this.skippedTestCount,totalTestCount:this.totalTestCount,totalTime:this.totalDuration,totalRequests:this.executionData.length,collection:null==(e=this.collection)?void 0:e.id,iterations:i,delay:p.delay||0,stopOnError:null==(t=this.executionOptions)?void 0:t.stopOnError,persist:this.persist,runWithEmptyCookieJar:p.runWithEmptyCookieJar,saveCookiesAfterRun:p.saveCookiesAfterRun,saveResponse:this.saveResponse,dataFile:null,name:null==(s=this.collection)?void 0:s.name,isTransient:!1,isEditable:!0,csvDataConfiguration:{},requestOrderSelection:this.hasCustomRequestOrderOrSelection?u:null,id:this.executionId,createdAt:this.createdAt,workspace:this.activeWorkspaceId,status:this.runStatus,startedAt:this.startedAt,source:"runner",branch:null,branchSource:null,currentIteration:this.currentIteration+1,folder:this.folderId||null};null!=(n=this.activeEnvironment)&&n.id&&(x.environment=(0,h.composeUID)(this.activeEnvironment.id,this.createdBy)),(0,m.importCollectionRun)({owner:this.createdBy,workspace:this.activeWorkspaceId,runDetails:x}).then((()=>{this.setRunCompleted(!0)})).catch((()=>{this.setRunCompleted(!0)}))}}var b=s(39245),j=s(13101),C=s(52322);const I=i().createContext({}),w=({children:e})=>{if(!(0,r.useInRouterContext)())throw new Error("RunExecutionContextProvider must be used within a Router");const{workspaceId:t,runId:s}=(0,r.useParams)(),i=(0,b.useAdditionalRouteContext)(),o=(0,j.getUserId)(),a=(0,n.useMemo)((()=>new _(o,t,i)),[s]);return(0,C.jsx)(I.Provider,{value:a,children:e})}}}]);
//# sourceMappingURL=8243.e8ad74eca4cb1da2.js.map